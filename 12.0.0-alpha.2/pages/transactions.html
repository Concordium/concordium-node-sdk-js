<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Transactions | Concordium JS-SDK</title><meta name="description" content="Documentation for Concordium JS-SDK"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script><link rel="stylesheet" href="../assets/code-blocks.css"/><link rel="stylesheet" href="../assets/pages.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base="..">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Concordium JS-SDK</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<ul class="tsd-breadcrumb">
<li><a href="../modules.html">Concordium JS-SDK</a></li>
<li><span>Concordium JS-SDK</span></li>
<li><a href="transactions.html">Transactions</a></li></ul>
<h1> Transactions</h1></div>
<div class="tsd-panel tsd-typography"><p>This document describes how to create different transactions for both the
Nodejs and Web SDK&#39;s.</p>
<p><strong>Table of Contents:</strong></p>
<!--toc:start-->
<ul>
<li><a href="#constructing-transactions">Constructing transactions</a><ul>
<li><a href="#create-a-simple-transfer-with-or-without-memo">Create a simple transfer with or without memo</a></li>
<li><a href="#create-a-register-data-transaction">Create a Register data transaction</a></li>
<li><a href="#create-a-configure-delegation-transaction">Create a configure delegation transaction</a></li>
<li><a href="#create-a-configure-baker-transaction">Create a configure baker transaction</a></li>
<li><a href="#create-a-credential-for-an-existing-account">Create a credential for an existing account</a></li>
<li><a href="#create-an-update-credentials-transaction">Create an update credentials transaction</a></li>
<li><a href="#deploy-module">Deploy module</a></li>
<li><a href="#init-contract">Init Contract</a></li>
<li><a href="#update-contract">Update Contract</a></li>
<li><a href="#smart-contract-parameters">Smart contract parameters</a></li>
<li><a href="#serialize-parameters-with-only-the-specific-types-schema">Serialize parameters with only the specific type&#39;s schema</a><!--toc:end--></li>
</ul>
</li>
</ul>

<a href="#constructing-transactions" id="constructing-transactions" style="color: inherit; text-decoration: none;">
  <h2>Constructing transactions</h2>
</a>

<a href="#create-a-simple-transfer-with-or-without-memo" id="create-a-simple-transfer-with-or-without-memo" style="color: inherit; text-decoration: none;">
  <h3>Create a simple transfer with or without memo</h3>
</a>
<p>The following example demonstrates how a simple transfer can be created.</p>
<details class="code-block" open><summary>
<p>From <a href="https://github.com/Concordium/concordium-node-sdk-js/blob/abf2c08/examples/nodejs/common/simpleTransfer.ts#L74">./../examples/nodejs/common/simpleTransfer.ts#74~102</a></p></summary>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">walletFile</span><span class="hl-0"> = </span><span class="hl-5">readFileSync</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">walletFile</span><span class="hl-0">, </span><span class="hl-3">&#39;utf8&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">walletExport</span><span class="hl-0"> = </span><span class="hl-5">parseWallet</span><span class="hl-0">(</span><span class="hl-2">walletFile</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">sender</span><span class="hl-0"> = </span><span class="hl-2">AccountAddress</span><span class="hl-0">.</span><span class="hl-5">fromBase58</span><span class="hl-0">(</span><span class="hl-2">walletExport</span><span class="hl-0">.</span><span class="hl-2">value</span><span class="hl-0">.</span><span class="hl-2">address</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">toAddress</span><span class="hl-0"> = </span><span class="hl-2">AccountAddress</span><span class="hl-0">.</span><span class="hl-5">fromBase58</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">receiver</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">nextNonce</span><span class="hl-0">: </span><span class="hl-10">NextAccountNonce</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getNextAccountNonce</span><span class="hl-0">(</span><span class="hl-2">sender</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">header</span><span class="hl-0">: </span><span class="hl-10">Transaction</span><span class="hl-0">.</span><span class="hl-10">Metadata</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">nonce:</span><span class="hl-0"> </span><span class="hl-2">nextNonce</span><span class="hl-0">.</span><span class="hl-2">nonce</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">sender</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">amount</span><span class="hl-0"> = </span><span class="hl-2">CcdAmount</span><span class="hl-0">.</span><span class="hl-5">fromCcd</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">amount</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">payload</span><span class="hl-0">: </span><span class="hl-10">SimpleTransferPayload</span><span class="hl-0"> | </span><span class="hl-10">SimpleTransferWithMemoPayload</span><span class="hl-0"> = </span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">memo</span><br/><span class="hl-0">        ? { </span><span class="hl-2">memo:</span><span class="hl-0"> </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">DataBlob</span><span class="hl-0">(</span><span class="hl-2">Buffer</span><span class="hl-0">.</span><span class="hl-5">from</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">memo</span><span class="hl-0">, </span><span class="hl-3">&#39;hex&#39;</span><span class="hl-0">)), </span><span class="hl-2">amount</span><span class="hl-0">, </span><span class="hl-2">toAddress</span><span class="hl-0"> }</span><br/><span class="hl-0">        : { </span><span class="hl-2">toAddress</span><span class="hl-0">, </span><span class="hl-2">amount</span><span class="hl-0"> };</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transaction</span><span class="hl-0"> = </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">transfer</span><span class="hl-0">(</span><span class="hl-2">payload</span><span class="hl-0">).</span><span class="hl-5">addMetadata</span><span class="hl-0">(</span><span class="hl-2">header</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signer</span><span class="hl-0"> = </span><span class="hl-5">buildAccountSigner</span><span class="hl-0">(</span><span class="hl-2">walletExport</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Sign transaction</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signedTransaction</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">signAndFinalize</span><span class="hl-0">(</span><span class="hl-2">transaction</span><span class="hl-0">, </span><span class="hl-2">signer</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionHash</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">sendTransaction</span><span class="hl-0">(</span><span class="hl-2">signedTransaction</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">status</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">waitForTransactionFinalization</span><span class="hl-0">(</span><span class="hl-2">transactionHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">dir</span><span class="hl-0">(</span><span class="hl-2">status</span><span class="hl-0">, { </span><span class="hl-2">depth:</span><span class="hl-0"> </span><span class="hl-4">null</span><span class="hl-0">, </span><span class="hl-2">colors:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0"> });</span>
</code></pre>
</details>


<a href="#create-a-register-data-transaction" id="create-a-register-data-transaction" style="color: inherit; text-decoration: none;">
  <h3>Create a Register data transaction</h3>
</a>
<p>The following example demonstrates how a register data transaction can
be created.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">header</span><span class="hl-0">: </span><span class="hl-10">AccountTransactionHeader</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">expiry:</span><span class="hl-0"> </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">TransactionExpiry</span><span class="hl-0">(</span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">Date</span><span class="hl-0">(</span><span class="hl-2">Date</span><span class="hl-0">.</span><span class="hl-5">now</span><span class="hl-0">() + </span><span class="hl-6">3600000</span><span class="hl-0">)),</span><br/><span class="hl-0">        </span><span class="hl-2">nonce:</span><span class="hl-0"> </span><span class="hl-6">1</span><span class="hl-4">n</span><span class="hl-0">,              </span><span class="hl-11">// the next nonce for this account, can be found using getNextAccountNonce</span><br/><span class="hl-0">        </span><span class="hl-2">sender:</span><span class="hl-0"> </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">AccountAddress</span><span class="hl-0">(</span><span class="hl-3">&quot;4ZJBYQbVp3zVZyjCXfZAAYBVkJMyVj8UKUNj9ox5YqTCBdBq2M&quot;</span><span class="hl-0">),</span><br/><span class="hl-0">    };</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">registerData</span><span class="hl-0">: </span><span class="hl-10">RegisterDataPayload</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">data:</span><span class="hl-0"> </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">DataBlob</span><span class="hl-0">(</span><span class="hl-2">Buffer</span><span class="hl-0">.</span><span class="hl-5">from</span><span class="hl-0">(</span><span class="hl-3">&#39;6B68656C6C6F20776F726C64&#39;</span><span class="hl-0">, </span><span class="hl-3">&#39;hex&#39;</span><span class="hl-0">)) </span><span class="hl-11">// Add the bytes you wish to register as a DataBlob</span><br/><span class="hl-0">    };</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">registerDataAccountTransaction</span><span class="hl-0">: </span><span class="hl-10">AccountTransaction</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">header:</span><span class="hl-0"> </span><span class="hl-2">header</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">payload:</span><span class="hl-0"> </span><span class="hl-2">registerData</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">type:</span><span class="hl-0"> </span><span class="hl-2">AccountTransactionType</span><span class="hl-0">.</span><span class="hl-2">RegisterData</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span>
</code></pre>

<a href="#create-a-configure-delegation-transaction" id="create-a-configure-delegation-transaction" style="color: inherit; text-decoration: none;">
  <h3>Create a configure delegation transaction</h3>
</a>
<p>The following example demonstrates how a configure delegation transaction
can be created. Note that although all the fields are optional, they are
all required, when becoming a delegator.</p>
<details class="code-block" open><summary>
<p>From <a href="https://github.com/Concordium/concordium-node-sdk-js/blob/abf2c08/examples/nodejs/common/delegationAdd.ts#L67">./../examples/nodejs/common/delegationAdd.ts#67~95</a></p></summary>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-11">// Read wallet-file</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">walletFile</span><span class="hl-0"> = </span><span class="hl-5">readFileSync</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">walletFile</span><span class="hl-0">, </span><span class="hl-3">&#39;utf8&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">wallet</span><span class="hl-0"> = </span><span class="hl-5">parseWallet</span><span class="hl-0">(</span><span class="hl-2">walletFile</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">sender</span><span class="hl-0"> = </span><span class="hl-2">AccountAddress</span><span class="hl-0">.</span><span class="hl-5">fromBase58</span><span class="hl-0">(</span><span class="hl-2">wallet</span><span class="hl-0">.</span><span class="hl-2">value</span><span class="hl-0">.</span><span class="hl-2">address</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signer</span><span class="hl-0"> = </span><span class="hl-5">buildAccountSigner</span><span class="hl-0">(</span><span class="hl-2">wallet</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">header</span><span class="hl-0">: </span><span class="hl-10">Transaction</span><span class="hl-0">.</span><span class="hl-10">Metadata</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">nonce:</span><span class="hl-0"> (</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getNextAccountNonce</span><span class="hl-0">(</span><span class="hl-2">sender</span><span class="hl-0">)).</span><span class="hl-2">nonce</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">sender:</span><span class="hl-0"> </span><span class="hl-2">sender</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">configureDelegationPayload</span><span class="hl-0">: </span><span class="hl-10">ConfigureDelegationPayload</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">stake:</span><span class="hl-0"> </span><span class="hl-2">CcdAmount</span><span class="hl-0">.</span><span class="hl-5">fromMicroCcd</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">stake</span><span class="hl-0">),</span><br/><span class="hl-0">        </span><span class="hl-2">delegationTarget:</span><span class="hl-0"> {</span><br/><span class="hl-0">            </span><span class="hl-2">delegateType:</span><span class="hl-0"> </span><span class="hl-2">DelegationTargetType</span><span class="hl-0">.</span><span class="hl-2">PassiveDelegation</span><span class="hl-0">,</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">        </span><span class="hl-2">restakeEarnings:</span><span class="hl-0"> </span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">restake</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transaction</span><span class="hl-0"> = </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">configureDelegation</span><span class="hl-0">(</span><span class="hl-2">configureDelegationPayload</span><span class="hl-0">).</span><span class="hl-5">addMetadata</span><span class="hl-0">(</span><span class="hl-2">header</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signed</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">signAndFinalize</span><span class="hl-0">(</span><span class="hl-2">transaction</span><span class="hl-0">, </span><span class="hl-2">signer</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionHash</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">sendTransaction</span><span class="hl-0">(</span><span class="hl-2">signed</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-3">&#39;Transaction submitted, waiting for finalization...&#39;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">status</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">waitForTransactionFinalization</span><span class="hl-0">(</span><span class="hl-2">transactionHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">dir</span><span class="hl-0">(</span><span class="hl-2">status</span><span class="hl-0">, { </span><span class="hl-2">depth:</span><span class="hl-0"> </span><span class="hl-4">null</span><span class="hl-0">, </span><span class="hl-2">colors:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0"> });</span>
</code></pre>
</details>


<a href="#create-a-configure-baker-transaction" id="create-a-configure-baker-transaction" style="color: inherit; text-decoration: none;">
  <h3>Create a configure baker transaction</h3>
</a>
<p>The following example demonstrates how a configure baker transaction can
be created.  Note that although all the fields are optional, they are all
required, when registering as a baker.</p>
<details class="code-block" open><summary>
<p>From <a href="https://github.com/Concordium/concordium-node-sdk-js/blob/abf2c08/examples/nodejs/common/bakerAdd.ts#L62">./../examples/nodejs/common/bakerAdd.ts#62~95</a></p></summary>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-11">// Read wallet-file</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">walletFile</span><span class="hl-0"> = </span><span class="hl-5">readFileSync</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">walletFile</span><span class="hl-0">, </span><span class="hl-3">&#39;utf8&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">wallet</span><span class="hl-0"> = </span><span class="hl-5">parseWallet</span><span class="hl-0">(</span><span class="hl-2">walletFile</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">sender</span><span class="hl-0"> = </span><span class="hl-2">AccountAddress</span><span class="hl-0">.</span><span class="hl-5">fromBase58</span><span class="hl-0">(</span><span class="hl-2">wallet</span><span class="hl-0">.</span><span class="hl-2">value</span><span class="hl-0">.</span><span class="hl-2">address</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signer</span><span class="hl-0"> = </span><span class="hl-5">buildAccountSigner</span><span class="hl-0">(</span><span class="hl-2">wallet</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">header</span><span class="hl-0">: </span><span class="hl-10">Transaction</span><span class="hl-0">.</span><span class="hl-10">Metadata</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">nonce:</span><span class="hl-0"> (</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getNextAccountNonce</span><span class="hl-0">(</span><span class="hl-2">sender</span><span class="hl-0">)).</span><span class="hl-2">nonce</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">sender</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">bakerKeys</span><span class="hl-0"> = </span><span class="hl-5">generateBakerKeys</span><span class="hl-0">(</span><span class="hl-2">sender</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">configureBakerPayload</span><span class="hl-0">: </span><span class="hl-10">ConfigureBakerPayload</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">stake:</span><span class="hl-0"> </span><span class="hl-2">CcdAmount</span><span class="hl-0">.</span><span class="hl-5">fromMicroCcd</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">stake</span><span class="hl-0">),</span><br/><span class="hl-0">        </span><span class="hl-2">restakeEarnings:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">openForDelegation:</span><span class="hl-0"> </span><span class="hl-2">OpenStatus</span><span class="hl-0">.</span><span class="hl-2">OpenForAll</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">keys:</span><span class="hl-0"> </span><span class="hl-2">bakerKeys</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">metadataUrl:</span><span class="hl-0"> </span><span class="hl-3">&#39;www.url.for.metadata&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">transactionFeeCommission:</span><span class="hl-0"> </span><span class="hl-6">10000</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">bakingRewardCommission:</span><span class="hl-0"> </span><span class="hl-6">10000</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">finalizationRewardCommission:</span><span class="hl-0"> </span><span class="hl-6">100000</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transaction</span><span class="hl-0"> = </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">configureValidator</span><span class="hl-0">(</span><span class="hl-2">configureBakerPayload</span><span class="hl-0">).</span><span class="hl-5">addMetadata</span><span class="hl-0">(</span><span class="hl-2">header</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signed</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">signAndFinalize</span><span class="hl-0">(</span><span class="hl-2">transaction</span><span class="hl-0">, </span><span class="hl-2">signer</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionHash</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">sendTransaction</span><span class="hl-0">(</span><span class="hl-2">signed</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-3">&#39;Transaction submitted, waiting for finalization...&#39;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">status</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">waitForTransactionFinalization</span><span class="hl-0">(</span><span class="hl-2">transactionHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">dir</span><span class="hl-0">(</span><span class="hl-2">status</span><span class="hl-0">, { </span><span class="hl-2">depth:</span><span class="hl-0"> </span><span class="hl-4">null</span><span class="hl-0">, </span><span class="hl-2">colors:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0"> });</span>
</code></pre>
</details>

<p>The open for delegation field determines the baker pools status and can have
three different values:</p>
<ul>
<li><code>OpenForAll</code>:
  New delegators can join the pool.</li>
<li><code>ClosedForAll</code>:
  New delegators won&#39;t be able to join the pool, but the current delegators
  won&#39;t be moved to passive delegation.</li>
<li><code>ClosedForNew</code>:
  New delegators won&#39;t be able to join the pool, and the current delegators
  will be moved to passive delegation.</li>
</ul>
<p>The three commission rates should specified in parts per hundred thousand,
i.e. 100% is 100000 and 1% 1000. Additionally they value should be within
the allowed range.  The allowed ranges are part of the chain parameters.</p>

<a href="#create-a-credential-for-an-existing-account" id="create-a-credential-for-an-existing-account" style="color: inherit; text-decoration: none;">
  <h3>Create a credential for an existing account</h3>
</a>
<p>The following example demonstrates how to create a credential for an existing
account. This credential can then be deployed onto the account by the account
owner with an update credentials transaction. See <a href="#create-an-update-credentials-transaction">Create an update credentials
transaction</a> for how to create this
transaction payload using the output from the example below:</p>
<!-- TODO: Recreate documentation for `Construct IdentityInput` -->

<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">lastFinalizedBlockHash</span><span class="hl-0"> = (</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getConsensusStatus</span><span class="hl-0">()).</span><span class="hl-2">lastFinalizedBlock</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">cryptographicParameters</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getCryptographicParameters</span><span class="hl-0">(</span><span class="hl-2">lastFinalizedBlockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (!</span><span class="hl-2">cryptographicParameters</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-1">throw</span><span class="hl-0"> </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-3">&#39;Cryptographic parameters were not found on a block that has been finalized.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    }</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The parts of the identity required to create a new credential, parsed from</span><br/><span class="hl-0">    </span><span class="hl-11">// e.g. a wallet export.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">identityInput</span><span class="hl-0">: </span><span class="hl-10">IdentityInput</span><span class="hl-0"> = ...</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Require just one key on the credential to sign. This can be any number</span><br/><span class="hl-0">    </span><span class="hl-11">// up to the number of public keys added to the credential.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">threshold</span><span class="hl-0">: </span><span class="hl-10">number</span><span class="hl-0"> = </span><span class="hl-6">1</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The index of the credential that will be created. This index is per identity</span><br/><span class="hl-0">    </span><span class="hl-11">// and has to be in sequence, and not already used. Note that index 0 is used</span><br/><span class="hl-0">    </span><span class="hl-11">// by the initial credential that was created with the identity.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">credentialIndex</span><span class="hl-0">: </span><span class="hl-10">number</span><span class="hl-0"> = </span><span class="hl-6">1</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// In this example the credential will have one signing key, but there</span><br/><span class="hl-0">    </span><span class="hl-11">// could be multiple. The signatures on the credential must be supplied</span><br/><span class="hl-0">    </span><span class="hl-11">// in the same order as the keys are here.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">publicKeys</span><span class="hl-0">: </span><span class="hl-10">VerifyKey</span><span class="hl-0">[] = [</span><br/><span class="hl-0">        {</span><br/><span class="hl-0">            </span><span class="hl-2">schemeId:</span><span class="hl-0"> </span><span class="hl-3">&quot;Ed25519&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">verifyKey:</span><span class="hl-0"> </span><span class="hl-3">&quot;c8cd7623c5a9316d8e2fccb51e1deee615bdb5d324fb4a6d33801848fb5e459e&quot;</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">    ];</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The attributes to reveal about the account holder on chain. In the case of an</span><br/><span class="hl-0">    </span><span class="hl-11">// empty array no attributes are revealed.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">revealedAttributes</span><span class="hl-0">: </span><span class="hl-10">AttributeKey</span><span class="hl-0">[] = [];</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The next step creates an unsigned credential for an existing account.</span><br/><span class="hl-0">    </span><span class="hl-11">// Note that unsignedCredentialForExistingAccount also contains the randomness used,</span><br/><span class="hl-0">    </span><span class="hl-11">// which should be saved to later be able to reveal attributes, or prove properties about them.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">existingAccountAddress</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">AccountAddress</span><span class="hl-0">(</span><span class="hl-3">&quot;3sAHwfehRNEnXk28W7A3XB3GzyBiuQkXLNRmDwDGPUe8JsoAcU&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">unsignedCredentialForExistingAccount</span><span class="hl-0"> = </span><span class="hl-5">createUnsignedCredentialForExistingAccount</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-2">identityInput</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">cryptographicParameters</span><span class="hl-0">.</span><span class="hl-2">value</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">threshold</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">publicKeys</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">credentialIndex</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">revealedAttributes</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">existingAccountAddress</span><br/><span class="hl-0">    );</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Sign the credential information.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">credentialDigestToSign</span><span class="hl-0"> = </span><span class="hl-5">getCredentialForExistingAccountSignDigest</span><span class="hl-0">(</span><span class="hl-2">unsignedCredentialForExistingAccount</span><span class="hl-0">.</span><span class="hl-2">unsignedCdi</span><span class="hl-0">, </span><span class="hl-2">existingAccountAddress</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">credentialSigningKey</span><span class="hl-0"> = </span><span class="hl-3">&#39;acab9ec5dfecfe5a6e13283f7ca79a6f6f5c685f036cd044557969e4dbe9d781&#39;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">credentialSignature</span><span class="hl-0"> = </span><span class="hl-2">Buffer</span><span class="hl-0">.</span><span class="hl-5">from</span><span class="hl-0">(</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">ed</span><span class="hl-0">.</span><span class="hl-5">sign</span><span class="hl-0">(</span><span class="hl-2">credentialDigestToSign</span><span class="hl-0">, </span><span class="hl-2">credentialSigningKey</span><span class="hl-0">)).</span><span class="hl-5">toString</span><span class="hl-0">(</span><span class="hl-3">&#39;hex&#39;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Combine the credential and the signatures so that the object is ready</span><br/><span class="hl-0">    </span><span class="hl-11">// to be submitted as part of an update credentials transaction. This is the</span><br/><span class="hl-0">    </span><span class="hl-11">// object that must be provided to the account owner, who can then use it to</span><br/><span class="hl-0">    </span><span class="hl-11">// deploy it to their account.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signedCredentialForExistingAccount</span><span class="hl-0">: </span><span class="hl-10">CredentialDeploymentInfo</span><span class="hl-0"> = </span><span class="hl-5">buildSignedCredentialForExistingAccount</span><span class="hl-0">(</span><span class="hl-2">unsignedCredentialForExistingAccount</span><span class="hl-0">.</span><span class="hl-2">unsignedCdi</span><span class="hl-0">, [</span><span class="hl-2">credentialSignature</span><span class="hl-0">]);</span>
</code></pre>

<a href="#create-an-update-credentials-transaction" id="create-an-update-credentials-transaction" style="color: inherit; text-decoration: none;">
  <h3>Create an update credentials transaction</h3>
</a>
<p>The following demonstrates how to construct an update credentials transaction,
which is used to deploy additional credentials to an account, remove existing
credentials on the account or to update the credential threshold on the
account. Note that the initial credential with index 0 cannot be removed.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-11">// The signed credential that is to be deployed on the account. Received from the</span><br/><span class="hl-0">    </span><span class="hl-11">// credential holder.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signedCredentialForExistingAccount</span><span class="hl-0">: </span><span class="hl-10">CredentialDeploymentInfo</span><span class="hl-0"> = ...</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The credentials that are deployed have to be indexed. Index 0 is used up</span><br/><span class="hl-0">    </span><span class="hl-11">// by the initial credential on an account. The indices that have already been</span><br/><span class="hl-0">    </span><span class="hl-11">// used can be found in the AccountInfo.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">accountAddress</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">AccountAddress</span><span class="hl-0">(</span><span class="hl-3">&quot;3sAHwfehRNEnXk28W7A3XB3GzyBiuQkXLNRmDwDGPUe8JsoAcU&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">accountInfo</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getAccountInfo</span><span class="hl-0">(</span><span class="hl-2">accountAddress</span><span class="hl-0">, </span><span class="hl-2">lastFinalizedBlockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">nextAvailableIndex</span><span class="hl-0"> = </span><span class="hl-2">Math</span><span class="hl-0">.</span><span class="hl-5">max</span><span class="hl-0">(...</span><span class="hl-2">Object</span><span class="hl-0">.</span><span class="hl-5">keys</span><span class="hl-0">(</span><span class="hl-2">accountInfo</span><span class="hl-0">.</span><span class="hl-2">accountCredentials</span><span class="hl-0">).</span><span class="hl-5">map</span><span class="hl-0">((</span><span class="hl-2">key</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-5">Number</span><span class="hl-0">(</span><span class="hl-2">key</span><span class="hl-0">))) + </span><span class="hl-6">1</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The current number of credentials on the account is required, as it is used to calculate</span><br/><span class="hl-0">    </span><span class="hl-11">// the correct energy cost.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">currentNumberOfCredentials</span><span class="hl-0"> = </span><span class="hl-5">BigInt</span><span class="hl-0">(</span><span class="hl-2">Object</span><span class="hl-0">.</span><span class="hl-5">keys</span><span class="hl-0">(</span><span class="hl-2">accountInfo</span><span class="hl-0">.</span><span class="hl-2">accountCredentials</span><span class="hl-0">).</span><span class="hl-2">length</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">newCredential</span><span class="hl-0">: </span><span class="hl-10">IndexedCredentialDeploymentInfo</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">cdi:</span><span class="hl-0"> </span><span class="hl-2">signedCredentialForExistingAccount</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">index:</span><span class="hl-0"> </span><span class="hl-2">nextAvailableIndex</span><br/><span class="hl-0">    };</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// List the credential id (credId) of any credentials that should be removed from the account.</span><br/><span class="hl-0">    </span><span class="hl-11">// The existing credentials (and their credId) can be found in the AccountInfo.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">credentialsToRemove</span><span class="hl-0"> = [</span><span class="hl-3">&quot;b0f11a9dcdd0758c8eec717956455deed73a0db59995da2cb20d73ee974eb39aec2c79970c640126827a8fbb84217424&quot;</span><span class="hl-0">];</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Update the credential threshold to 2, so that transactions require signatures from both</span><br/><span class="hl-0">    </span><span class="hl-11">// of the credentials. If left at e.g. 1, then both credentials can create transactions</span><br/><span class="hl-0">    </span><span class="hl-11">// by themselves.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">threshold</span><span class="hl-0"> = </span><span class="hl-6">2</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">updateCredentialsPayload</span><span class="hl-0">: </span><span class="hl-10">UpdateCredentialsPayload</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">newCredentials:</span><span class="hl-0"> [</span><span class="hl-2">newCredential</span><span class="hl-0">],</span><br/><span class="hl-0">        </span><span class="hl-2">removeCredentialIds:</span><span class="hl-0"> </span><span class="hl-2">credentialsToRemove</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">threshold:</span><span class="hl-0"> </span><span class="hl-2">threshold</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">currentNumberOfCredentials:</span><span class="hl-0"> </span><span class="hl-2">currentNumberOfCredentials</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span>
</code></pre>

<a href="#deploy-module" id="deploy-module" style="color: inherit; text-decoration: none;">
  <h3>Deploy module</h3>
</a>
<p>The following example demonstrates how to construct a &quot;deployModule&quot;
transaction, which is used to deploy a smart contract module.</p>
<details class="code-block" open><summary>
<p>From <a href="https://github.com/Concordium/concordium-node-sdk-js/blob/abf2c08/examples/nodejs/common/deployModule.ts#L52">./../examples/nodejs/common/deployModule.ts#52~84</a></p></summary>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">walletFile</span><span class="hl-0"> = </span><span class="hl-5">readFileSync</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">walletFile</span><span class="hl-0">, </span><span class="hl-3">&#39;utf8&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">wallet</span><span class="hl-0"> = </span><span class="hl-5">parseWallet</span><span class="hl-0">(</span><span class="hl-2">walletFile</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">sender</span><span class="hl-0"> = </span><span class="hl-2">AccountAddress</span><span class="hl-0">.</span><span class="hl-5">fromBase58</span><span class="hl-0">(</span><span class="hl-2">wallet</span><span class="hl-0">.</span><span class="hl-2">value</span><span class="hl-0">.</span><span class="hl-2">address</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Get the wasm file as a buffer.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">wasmModule</span><span class="hl-0"> = </span><span class="hl-2">Buffer</span><span class="hl-0">.</span><span class="hl-5">from</span><span class="hl-0">(</span><span class="hl-5">readFileSync</span><span class="hl-0">(</span><span class="hl-2">cli</span><span class="hl-0">.</span><span class="hl-2">flags</span><span class="hl-0">.</span><span class="hl-2">moduleFile</span><span class="hl-0">));</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Note that if built using cargo-concordium `1.0.0`, the version should be added</span><br/><span class="hl-0">    </span><span class="hl-11">// to the payload. In `2.0.0` and newer, the version is prepended into the module</span><br/><span class="hl-0">    </span><span class="hl-11">// itself. To deploy a V0 module, which has been built with cargo-concordium</span><br/><span class="hl-0">    </span><span class="hl-11">// version below 2, you should add the version field to the payload.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">deployModule</span><span class="hl-0">: </span><span class="hl-10">DeployModulePayload</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">source:</span><span class="hl-0"> </span><span class="hl-2">wasmModule</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">header</span><span class="hl-0">: </span><span class="hl-10">Transaction</span><span class="hl-0">.</span><span class="hl-10">Metadata</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">nonce:</span><span class="hl-0"> (</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getNextAccountNonce</span><span class="hl-0">(</span><span class="hl-2">sender</span><span class="hl-0">)).</span><span class="hl-2">nonce</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">sender</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">deployModuleTransaction</span><span class="hl-0"> = </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">deployModule</span><span class="hl-0">(</span><span class="hl-2">deployModule</span><span class="hl-0">).</span><span class="hl-5">addMetadata</span><span class="hl-0">(</span><span class="hl-2">header</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Sign transaction</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signer</span><span class="hl-0"> = </span><span class="hl-5">buildAccountSigner</span><span class="hl-0">(</span><span class="hl-2">wallet</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signedTransaction</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">signAndFinalize</span><span class="hl-0">(</span><span class="hl-2">deployModuleTransaction</span><span class="hl-0">, </span><span class="hl-2">signer</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionHash</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">sendTransaction</span><span class="hl-0">(</span><span class="hl-2">signedTransaction</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-3">&#39;Transaction submitted, waiting for finalization...&#39;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">status</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">waitForTransactionFinalization</span><span class="hl-0">(</span><span class="hl-2">transactionHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">dir</span><span class="hl-0">(</span><span class="hl-2">status</span><span class="hl-0">, { </span><span class="hl-2">depth:</span><span class="hl-0"> </span><span class="hl-4">null</span><span class="hl-0">, </span><span class="hl-2">colors:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0"> });</span>
</code></pre>
</details>


<a href="#init-contract" id="init-contract" style="color: inherit; text-decoration: none;">
  <h3>Init Contract</h3>
</a>
<p>The following example demonstrates how to initialize a smart contract from
a module, which has already been deployed. The name of the contract <code>&quot;weather&quot;</code>.</p>
<details class="code-block" open><summary>
<p>From <a href="https://github.com/Concordium/concordium-node-sdk-js/blob/abf2c08/examples/nodejs/composed-examples/initAndUpdateContract.ts#L86">./../examples/nodejs/composed-examples/initAndUpdateContract.ts#86~122</a></p></summary>
<pre><code class="language-ts"><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">initHeader</span><span class="hl-0">: </span><span class="hl-10">Transaction</span><span class="hl-0">.</span><span class="hl-10">Metadata</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">nonce:</span><span class="hl-0"> (</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getNextAccountNonce</span><span class="hl-0">(</span><span class="hl-2">sender</span><span class="hl-0">)).</span><span class="hl-2">nonce</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">sender</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">initParams</span><span class="hl-0"> = </span><span class="hl-5">serializeInitContractParameters</span><span class="hl-0">(</span><span class="hl-2">contractName</span><span class="hl-0">, </span><span class="hl-2">sunnyWeather</span><span class="hl-0">, </span><span class="hl-2">schema</span><span class="hl-0">!.</span><span class="hl-2">buffer</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">initPayload</span><span class="hl-0"> = </span><span class="hl-2">Payload</span><span class="hl-0">.</span><span class="hl-5">initContract</span><span class="hl-0">({</span><br/><span class="hl-0">        </span><span class="hl-2">amount:</span><span class="hl-0"> </span><span class="hl-2">CcdAmount</span><span class="hl-0">.</span><span class="hl-5">zero</span><span class="hl-0">(),</span><br/><span class="hl-0">        </span><span class="hl-2">moduleRef:</span><span class="hl-0"> </span><span class="hl-2">moduleRef</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">initName:</span><span class="hl-0"> </span><span class="hl-2">contractName</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">param:</span><span class="hl-0"> </span><span class="hl-2">initParams</span><span class="hl-0">,</span><br/><span class="hl-0">    });</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">initTransaction</span><span class="hl-0"> = </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">initContract</span><span class="hl-0">(</span><span class="hl-2">initPayload</span><span class="hl-0">, </span><span class="hl-2">maxCost</span><span class="hl-0">).</span><span class="hl-5">addMetadata</span><span class="hl-0">(</span><span class="hl-2">initHeader</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Sign transaction</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signedInit</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">signAndFinalize</span><span class="hl-0">(</span><span class="hl-2">initTransaction</span><span class="hl-0">, </span><span class="hl-2">signer</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">initTrxHash</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">sendTransaction</span><span class="hl-0">(</span><span class="hl-2">signedInit</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-3">&#39;Transaction submitted, waiting for finalization...&#39;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">initStatus</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">waitForTransactionFinalization</span><span class="hl-0">(</span><span class="hl-2">initTrxHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">dir</span><span class="hl-0">(</span><span class="hl-2">initStatus</span><span class="hl-0">, { </span><span class="hl-2">depth:</span><span class="hl-0"> </span><span class="hl-4">null</span><span class="hl-0">, </span><span class="hl-2">colors:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0"> });</span><br/><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (!</span><span class="hl-5">isKnown</span><span class="hl-0">(</span><span class="hl-2">initStatus</span><span class="hl-0">.</span><span class="hl-2">summary</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-1">throw</span><span class="hl-0"> </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-3">&#39;Unexpected transaction outcome&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    }</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">contractAddress</span><span class="hl-0"> = </span><span class="hl-5">knownOrError</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-5">affectedContracts</span><span class="hl-0">(</span><span class="hl-2">initStatus</span><span class="hl-0">.</span><span class="hl-2">summary</span><span class="hl-0">)[</span><span class="hl-6">0</span><span class="hl-0">],</span><br/><span class="hl-0">        </span><span class="hl-3">&#39;Expected contract init event to be known&#39;</span><br/><span class="hl-0">    );</span><br/>
</code></pre>
</details>


<a href="#update-contract" id="update-contract" style="color: inherit; text-decoration: none;">
  <h3>Update Contract</h3>
</a>
<p>The following example demonstrates how to update a smart contract.</p>
<p>To update a smart contract we create a &#39;updateContractTransaction&#39;. To do this
we need to specify the name of the receive function, which should contain
the contract name as a prefix (So if the contract has the name <code>&quot;weather&quot;</code>
and the receive function has the name <code>&quot;set&quot;</code> then the receiveName should be
<code>&quot;weather.set&quot;)</code>.</p>
<p>We also need to supply the contract address of the contract instance. This
consists of an index and a subindex.</p>
<details class="code-block" open><summary>
<p>From <a href="https://github.com/Concordium/concordium-node-sdk-js/blob/abf2c08/examples/nodejs/composed-examples/initAndUpdateContract.ts#L132">./../examples/nodejs/composed-examples/initAndUpdateContract.ts#132~164</a></p></summary>
<pre><code class="language-ts"><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">updateHeader</span><span class="hl-0">: </span><span class="hl-10">Transaction</span><span class="hl-0">.</span><span class="hl-10">Metadata</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">nonce:</span><span class="hl-0"> (</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getNextAccountNonce</span><span class="hl-0">(</span><span class="hl-2">sender</span><span class="hl-0">)).</span><span class="hl-2">nonce</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">sender</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">updateParams</span><span class="hl-0"> = </span><span class="hl-5">serializeUpdateContractParameters</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-2">contractName</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">EntrypointName</span><span class="hl-0">.</span><span class="hl-5">fromString</span><span class="hl-0">(</span><span class="hl-3">&#39;set&#39;</span><span class="hl-0">),</span><br/><span class="hl-0">        </span><span class="hl-2">rainyWeather</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">schema</span><span class="hl-0">!.</span><span class="hl-2">buffer</span><br/><span class="hl-0">    );</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">updatePayload</span><span class="hl-0"> = </span><span class="hl-2">Payload</span><span class="hl-0">.</span><span class="hl-5">updateContract</span><span class="hl-0">({</span><br/><span class="hl-0">        </span><span class="hl-2">amount:</span><span class="hl-0"> </span><span class="hl-2">CcdAmount</span><span class="hl-0">.</span><span class="hl-5">zero</span><span class="hl-0">(),</span><br/><span class="hl-0">        </span><span class="hl-2">address:</span><span class="hl-0"> </span><span class="hl-5">unwrap</span><span class="hl-0">(</span><span class="hl-2">contractAddress</span><span class="hl-0">),</span><br/><span class="hl-0">        </span><span class="hl-2">receiveName</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">message:</span><span class="hl-0"> </span><span class="hl-2">updateParams</span><span class="hl-0">,</span><br/><span class="hl-0">    });</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">updateTransaction</span><span class="hl-0"> = </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">updateContract</span><span class="hl-0">(</span><span class="hl-2">updatePayload</span><span class="hl-0">, </span><span class="hl-2">maxCost</span><span class="hl-0">).</span><span class="hl-5">addMetadata</span><span class="hl-0">(</span><span class="hl-2">updateHeader</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Sign transaction</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signedUpdate</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">Transaction</span><span class="hl-0">.</span><span class="hl-5">signAndFinalize</span><span class="hl-0">(</span><span class="hl-2">updateTransaction</span><span class="hl-0">, </span><span class="hl-2">signer</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">updateTrxHash</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">sendTransaction</span><span class="hl-0">(</span><span class="hl-2">signedUpdate</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-3">&#39;Transaction submitted, waiting for finalization...&#39;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">updateStatus</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">waitForTransactionFinalization</span><span class="hl-0">(</span><span class="hl-2">updateTrxHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-5">dir</span><span class="hl-0">(</span><span class="hl-2">updateStatus</span><span class="hl-0">, { </span><span class="hl-2">depth:</span><span class="hl-0"> </span><span class="hl-4">null</span><span class="hl-0">, </span><span class="hl-2">colors:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0"> });</span><br/>
</code></pre>
</details>


<a href="#smart-contract-parameters" id="smart-contract-parameters" style="color: inherit; text-decoration: none;">
  <h3>Smart contract parameters</h3>
</a>
<p>In this section we will describe how to provide contracts with parameters. The
user should provide the input in the JSON format specified in <a href="https://developer.concordium.software/en/mainnet/smart-contracts/references/schema-json.html">our
documentation</a>.</p>
<p>If the called smart contract function does not take any parameters, you can
simply pass an empty buffer as the parameters:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">params</span><span class="hl-0"> = </span><span class="hl-2">Buffer</span><span class="hl-0">.</span><span class="hl-5">from</span><span class="hl-0">([]);</span>
</code></pre>
<p>If the function does take parameters, however, then you will need to construct
them correctly. Let&#39;s consider the following example where the contract&#39;s
initialization parameter is the following structure:</p>
<pre><code class="language-rust"><span class="hl-0">    #[derive(</span><span class="hl-10">SchemaType</span><span class="hl-0">, </span><span class="hl-10">Serialize</span><span class="hl-0">)]</span><br/><span class="hl-0">    </span><span class="hl-4">struct</span><span class="hl-0"> </span><span class="hl-10">MyStruct</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-2">age</span><span class="hl-0">: </span><span class="hl-10">u16</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">name</span><span class="hl-0">: </span><span class="hl-10">String</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">city</span><span class="hl-0">: </span><span class="hl-10">String</span><span class="hl-0">,</span><br/><span class="hl-0">    }</span>
</code></pre>
<p>An example of a valid input would be:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">userInput</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">age:</span><span class="hl-0"> </span><span class="hl-6">51</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">name:</span><span class="hl-0"> </span><span class="hl-3">&#39;Concordium&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">city:</span><span class="hl-0"> </span><span class="hl-3">&#39;Zug&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span>
</code></pre>
<p>An other example could be if the parameter is the following &quot;SomeEnum&quot;:</p>
<pre><code class="language-rust"><span class="hl-0">    #[derive(</span><span class="hl-10">SchemaType</span><span class="hl-0">, </span><span class="hl-10">Serialize</span><span class="hl-0">)]</span><br/><span class="hl-0">    </span><span class="hl-4">enum</span><span class="hl-0"> </span><span class="hl-10">AnotherEnum</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-10">D</span><span class="hl-0">,</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    #[derive(</span><span class="hl-10">SchemaType</span><span class="hl-0">, </span><span class="hl-10">Serialize</span><span class="hl-0">)]</span><br/><span class="hl-0">    </span><span class="hl-4">enum</span><span class="hl-0"> </span><span class="hl-10">SomeEnum</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-5">B</span><span class="hl-0">(</span><span class="hl-10">AnotherEnum</span><span class="hl-0">),</span><br/><span class="hl-0">    }</span>
</code></pre>
<p>Then the following would be a valid input:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">userInput</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">B:</span><span class="hl-0"> [</span><br/><span class="hl-0">          {</span><br/><span class="hl-0">            </span><span class="hl-2">D:</span><span class="hl-0"> []</span><br/><span class="hl-0">          }</span><br/><span class="hl-0">        ]</span><br/><span class="hl-0">      };</span>
</code></pre>
<p>Then the user needs to provide the schema for the module.</p>
<p>We can get the schema from the smart contract itself if it is embedded
the contract:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">schema</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getEmbeddedSchema</span><span class="hl-0">(</span><span class="hl-2">moduleRef</span><span class="hl-0">);</span>
</code></pre>
<p>We can also load the schema from a file:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">rawModuleSchema</span><span class="hl-0"> = </span><span class="hl-2">Buffer</span><span class="hl-0">.</span><span class="hl-5">from</span><span class="hl-0">(</span><span class="hl-2">fs</span><span class="hl-0">.</span><span class="hl-5">readFileSync</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-3">&#39;SCHEMA-FILE-PATH&#39;</span><br/><span class="hl-0">    ));</span>
</code></pre>
<p>Then the parameters can be serialized into bytes:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">inputParams</span><span class="hl-0"> = </span><span class="hl-5">serializeInitContractParameters</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-3">&quot;my-contract-name&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">userInput</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">rawModuleSchema</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">schemaVersion</span><br/><span class="hl-0">    );</span>
</code></pre>
<p>For V0 contracts the schemaVersion should be <code>SchemaVersion.V0</code>. For V1
contracts it should currently be <code>SchemaVersion.V1</code>, unless the contract have
been built using cargo-concordium &gt;=2.0.0, which are internally versioned,
and then the version does not need to be provided.</p>

<a href="#serialize-parameters-with-only-the-specific-type39s-schema" id="serialize-parameters-with-only-the-specific-type39s-schema" style="color: inherit; text-decoration: none;">
  <h3>Serialize parameters with only the specific type&#39;s schema</h3>
</a>
<p>In the previous section the schema used was assumed to be the schema for an
entire module. In some cases one might want to use a schema containing only
the specific type of the parameter.</p>
<p>For this, the function <code>serializeTypeValue</code> can used.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">inputParams</span><span class="hl-0"> = </span><span class="hl-5">serializeTypeValue</span><span class="hl-0">(</span><span class="hl-2">userInput</span><span class="hl-0">, </span><span class="hl-2">rawTypeSchema</span><span class="hl-0">);</span>
</code></pre>
<p>For reference, the type schema for parameters can be extracted
using the functions <code>getInitContractParameterSchema</code> and
<code>getUpdateContractParameterSchema</code>. For a receive function:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">rawTypeSchema</span><span class="hl-0"> = </span><span class="hl-5">getUpdateContractParameterSchema</span><span class="hl-0">(</span><br/><span class="hl-0">            </span><span class="hl-2">rawModuleSchema</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">contractName</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">receiveFunctionName</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">schemaVersion</span><br/><span class="hl-0">    )</span>
</code></pre>
<p>And for the initialization:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">rawTypeSchema</span><span class="hl-0"> = </span><span class="hl-5">getInitContractParameterSchema</span><span class="hl-0">(</span><br/><span class="hl-0">            </span><span class="hl-2">rawModuleSchema</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">contractName</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">schemaVersion</span><br/><span class="hl-0">    )</span>
</code></pre>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current"><a href="../modules.html">Concordium JS-<wbr/>SDK</a>
<ul>
<li class="current pages-entry pages-entry-menu pages-entry-depth-1"><a>Concordium JS-<wbr/>SDK</a>
<ul>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="cis2-contracts.html">CIS2-<wbr/>Contracts</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="identity-proofs.html">Identity <wbr/>Proofs</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="runnable-examples.html">Runnable <wbr/>Examples</a></li>
<li class="current selected pages-entry pages-entry-page pages-entry-depth-2"><a href="transactions.html">Transactions</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="utility-functions.html">Utility <wbr/>Functions</a></li>
<li class="pages-entry pages-entry-menu pages-entry-depth-2"><a>Miscellaneous <wbr/>Pages</a>
<ul>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="misc-pages/account-creation.html">Account <wbr/>Creation</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="misc-pages/bundler-optimizations.html">Optimizing bundled applications</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="misc-pages/grpc-migration.html">GRPCv1 to GRPCv2 <wbr/>Migration <wbr/>Guide</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="misc-pages/grpc-v1.html">Old GRPC-<wbr/>Client</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="misc-pages/upgrade-guide.html">Upgrade <wbr/>Guide</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="misc-pages/react-native.html">React <wbr/>Native</a></li></ul></li></ul></li>
<li class="tsd-kind-module"><a href="../modules/cis0.html">cis0</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/cis0.CIS0.html">CIS0</a></li></ul></li>
<li class="tsd-kind-module"><a href="../modules/cis2.html">cis2</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/cis2.CIS2.html">CIS2</a></li></ul></li>
<li class="tsd-kind-module"><a href="../modules/cis3.html">cis3</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/cis3.CIS3.html">CIS3</a></li></ul></li>
<li class="tsd-kind-module"><a href="../modules/cis4.html">cis4</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/cis4.CIS4.html">CIS4</a></li></ul></li>
<li class="tsd-kind-module"><a href="../modules/grpc.html">grpc</a></li>
<li class="tsd-kind-module"><a href="../modules/id.html">id</a></li>
<li class="tsd-kind-module"><a href="../modules/nodejs.html">nodejs</a></li>
<li class="tsd-kind-module"><a href="../modules/plt.html">plt</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/plt.Token.html">Token</a></li></ul></li>
<li class="tsd-kind-module"><a href="../modules/plt_Cbor.html">plt/<wbr/>Cbor</a></li>
<li class="tsd-kind-module"><a href="../modules/plt_CborAccountAddress.html">plt/<wbr/>Cbor<wbr/>Account<wbr/>Address</a></li>
<li class="tsd-kind-module"><a href="../modules/plt_CborContractAddress.html">plt/<wbr/>Cbor<wbr/>Contract<wbr/>Address</a></li>
<li class="tsd-kind-module"><a href="../modules/plt_CborMemo.html">plt/<wbr/>Cbor<wbr/>Memo</a></li>
<li class="tsd-kind-module"><a href="../modules/plt_TokenAmount.html">plt/<wbr/>Token<wbr/>Amount</a></li>
<li class="tsd-kind-module"><a href="../modules/plt_TokenHolder.html">plt/<wbr/>Token<wbr/>Holder</a></li>
<li class="tsd-kind-module"><a href="../modules/plt_TokenId.html">plt/<wbr/>Token<wbr/>Id</a></li>
<li class="tsd-kind-module"><a href="../modules/plt_TokenMetadataUrl.html">plt/<wbr/>Token<wbr/>Metadata<wbr/>Url</a></li>
<li class="tsd-kind-module"><a href="../modules/plt_TokenModuleReference.html">plt/<wbr/>Token<wbr/>Module<wbr/>Reference</a></li>
<li class="tsd-kind-module"><a href="../modules/schema.html">schema</a></li>
<li class="tsd-kind-module"><a href="../modules/transactions.html">transactions</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/transactions.AccountTransactionV0.html">Account<wbr/>Transaction<wbr/>V0</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/transactions.Payload.html">Payload</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/transactions.Transaction.html">Transaction</a></li></ul></li>
<li class="tsd-kind-module"><a href="../modules/types.html">types</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/types.ContractName.html">Contract<wbr/>Name</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/types.CredentialRegistrationId.html">Credential<wbr/>Registration<wbr/>Id</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/types.EntrypointName.html">Entrypoint<wbr/>Name</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/types.ModuleClient.html">Module<wbr/>Client</a></li></ul></li>
<li class="tsd-kind-module"><a href="../modules/types_AccountAddress.html">types/<wbr/>Account<wbr/>Address</a></li>
<li class="tsd-kind-module"><a href="../modules/types_BlockHash.html">types/<wbr/>Block<wbr/>Hash</a></li>
<li class="tsd-kind-module"><a href="../modules/types_CcdAmount.html">types/<wbr/>Ccd<wbr/>Amount</a></li>
<li class="tsd-kind-module"><a href="../modules/types_ContractAddress.html">types/<wbr/>Contract<wbr/>Address</a></li>
<li class="tsd-kind-module"><a href="../modules/types_ContractEvent.html">types/<wbr/>Contract<wbr/>Event</a></li>
<li class="tsd-kind-module"><a href="../modules/types_Duration.html">types/<wbr/>Duration</a></li>
<li class="tsd-kind-module"><a href="../modules/types_Energy.html">types/<wbr/>Energy</a></li>
<li class="tsd-kind-module"><a href="../modules/types_InitName.html">types/<wbr/>Init<wbr/>Name</a></li>
<li class="tsd-kind-module"><a href="../modules/types_ModuleReference.html">types/<wbr/>Module<wbr/>Reference</a></li>
<li class="tsd-kind-module"><a href="../modules/types_Parameter.html">types/<wbr/>Parameter</a></li>
<li class="tsd-kind-module"><a href="../modules/types_ReceiveName.html">types/<wbr/>Receive<wbr/>Name</a></li>
<li class="tsd-kind-module"><a href="../modules/types_ReturnValue.html">types/<wbr/>Return<wbr/>Value</a></li>
<li class="tsd-kind-module"><a href="../modules/types_SequenceNumber.html">types/<wbr/>Sequence<wbr/>Number</a></li>
<li class="tsd-kind-module"><a href="../modules/types_Timestamp.html">types/<wbr/>Timestamp</a></li>
<li class="tsd-kind-module"><a href="../modules/types_TransactionExpiry.html">types/<wbr/>Transaction<wbr/>Expiry</a></li>
<li class="tsd-kind-module"><a href="../modules/types_TransactionHash.html">types/<wbr/>Transaction<wbr/>Hash</a></li>
<li class="tsd-kind-module"><a href="../modules/util.html">util</a></li>
<li class="tsd-kind-module"><a href="../modules/wasm.html">wasm</a></li>
<li class="tsd-kind-module"><a href="../modules/web3_id.html">web3-<wbr/>id</a></li></ul></li></ul></div></details></nav>
<nav class="tsd-navigation secondary menu-sticky"></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="../assets/main.js"></script></body></html>