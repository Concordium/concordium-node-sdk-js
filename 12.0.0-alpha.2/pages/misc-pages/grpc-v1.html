<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Old GRPC-Client | Concordium JS-SDK</title><meta name="description" content="Documentation for Concordium JS-SDK"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../../assets/style.css"/><link rel="stylesheet" href="../../assets/highlight.css"/><script async src="../../assets/search.js" id="search-script"></script><link rel="stylesheet" href="../../assets/code-blocks.css"/><link rel="stylesheet" href="../../assets/pages.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base="../..">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="../../index.html" class="title">Concordium JS-SDK</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<ul class="tsd-breadcrumb">
<li><a href="../../modules.html">Concordium JS-SDK</a></li>
<li><span>Concordium JS-SDK</span></li>
<li><span>Miscellaneous Pages</span></li>
<li><a href="grpc-v1.html">Old GRPC-Client</a></li></ul>
<h1> Old GRPC-Client</h1></div>
<div class="tsd-panel tsd-typography"><blockquote>
<p>:warning: <strong>This explains behaviour of the deprecated v1 concordium client</strong>:
check out <a href="../../classes/grpc.ConcordiumGRPCClient.html">the documentation the v2 client</a></p>
</blockquote>
<p>This describes the JSON-RPC client, which can interact with the <a href="https://github.com/Concordium/concordium-json-rpc">Concordium
JSON-RPC server</a></p>
<p>Currently the client only supports the following entrypoints, with the same
interface as the grpc v1 node client:</p>
<ul>
<li><a href="#send-account-transaction">sendTransaction</a></li>
<li><a href="#gettransactionstatus">getTransactionStatus</a></li>
<li><a href="#getinstanceinfo">getInstanceInfo</a></li>
<li><a href="#getconsensusstatus">getConsensusStatus</a></li>
<li><a href="#getaccountinfo">getAccountInfo</a></li>
<li><a href="#getcryptographicparameters">getCryptographicParameters</a></li>
<li><a href="#invokecontract">invokeContract</a></li>
<li><a href="#getmodulesource">getModuleSource</a></li>
</ul>
<p><strong>Table of Contents:</strong></p>
<!--toc:start-->
<ul>
<li><a href="#grpcv1-client">GRPCv1-Client</a><ul>
<li><a href="#creating-a-client">Creating a client</a></li>
<li><a href="#send-account-transaction">Send Account Transaction</a></li>
<li><a href="#create-a-new-account">Create a new account</a></li>
<li><a href="#construct-identityinput-for-creating-credentials">Construct IdentityInput for creating credentials</a><ul>
<li><a href="#construct-from-user-cli-output">Construct from user-cli output:</a></li>
<li><a href="#construct-from-mobile-wallet-export">Construct from mobile wallet export:</a></li>
</ul>
</li>
<li><a href="#getaccountinfo">getAccountInfo</a></li>
<li><a href="#getnextaccountnonce">getNextAccountNonce</a></li>
<li><a href="#gettransactionstatus">getTransactionStatus</a></li>
<li><a href="#getblocksummary">getBlockSummary</a></li>
<li><a href="#getblockinfo">getBlockInfo</a></li>
<li><a href="#getblocksatheight">getBlocksAtHeight</a></li>
<li><a href="#getconsensusstatus">getConsensusStatus</a></li>
<li><a href="#getcryptographicparameters">getCryptographicParameters</a></li>
<li><a href="#getidentityproviders">getIdentityProviders</a></li>
<li><a href="#getanonymityrevokers">getAnonymityRevokers</a></li>
<li><a href="#getpeerlist">getPeerList</a></li>
<li><a href="#getbakerlist">getBakerList</a></li>
<li><a href="#getpoolstatus">getPoolStatus</a></li>
<li><a href="#getrewardstatus">getRewardStatus</a></li>
<li><a href="#check-block-for-transfers-with-memo">Check block for transfers with memo</a></li>
<li><a href="#getinstances">getInstances</a></li>
<li><a href="#getinstanceinfo">getInstanceInfo</a></li>
<li><a href="#invokecontract">invokeContract</a></li>
<li><a href="#getmodulesource">getModuleSource</a><!--toc:end--></li>
</ul>
</li>
</ul>

<a href="#grpcv1-client" id="grpcv1-client" style="color: inherit; text-decoration: none;">
  <h2>GRPCv1-Client</h2>
</a>
<p><em>Only accessible prior to version 7 of the web SDK (and in all versions of the deprecated nodejs SDK)</em></p>
<p>The ConcordiumNodeClient defines the interface to be used to send and receive
data from a concordium-node.</p>

<a href="#creating-a-client" id="creating-a-client" style="color: inherit; text-decoration: none;">
  <h3>Creating a client</h3>
</a>
<p>The current node setup only allows for insecure connections, which can be
set up in the following way. The access is controlled by the credentials
and the metadata.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">credentials</span><span class="hl-0">, </span><span class="hl-2">Metadata</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;@grpc/grpc-js&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">ConcordiumNodeClient</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;@concordium/node-sdk&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">metadata</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">Metadata</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-2">metadata</span><span class="hl-0">.</span><span class="hl-5">add</span><span class="hl-0">(</span><span class="hl-3">&quot;authentication&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;rpcadmin&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">insecureCredentials</span><span class="hl-0"> = </span><span class="hl-2">credentials</span><span class="hl-0">.</span><span class="hl-5">createInsecure</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">client</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">ConcordiumNodeClient</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-3">&quot;127.0.0.1&quot;</span><span class="hl-0">,    </span><span class="hl-11">// ip address</span><br/><span class="hl-0">        </span><span class="hl-6">10000</span><span class="hl-0">,          </span><span class="hl-11">// port</span><br/><span class="hl-0">        </span><span class="hl-2">insecureCredentials</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">metadata</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-6">15000</span><span class="hl-0">           </span><span class="hl-11">// timeout in ms</span><br/><span class="hl-0">    );</span>
</code></pre>

<a href="#send-account-transaction" id="send-account-transaction" style="color: inherit; text-decoration: none;">
  <h3>Send Account Transaction</h3>
</a>
<p>The following example demonstrates how to send any account transaction.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">let</span><span class="hl-0"> </span><span class="hl-2">accountTransaction</span><span class="hl-0">: </span><span class="hl-10">AccountTransaction</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-11">// Create the transaction</span><br/><span class="hl-0">    </span><span class="hl-11">// ...</span><br/><br/><span class="hl-0">    </span><span class="hl-4">let</span><span class="hl-0"> </span><span class="hl-2">signatures</span><span class="hl-0">: </span><span class="hl-10">AccountTransactionSignature</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-11">// Sign the transaction</span><br/><span class="hl-0">    </span><span class="hl-11">// ...</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Send the transaction to the node.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">success</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">sendAccountTransaction</span><span class="hl-0">(</span><span class="hl-2">accountTransaction</span><span class="hl-0">, </span><span class="hl-2">signatures</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">success</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-11">// The node accepted the transaction. This does not ensure that the transaction</span><br/><span class="hl-0">        </span><span class="hl-11">// will end up in a block, only that the format of the submitted transaction was valid.</span><br/><span class="hl-0">    } </span><span class="hl-1">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-11">// The node rejected the transaction. </span><br/><span class="hl-0">    }</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Check the status of the transaction. Should be checked with an appropriate interval,</span><br/><span class="hl-0">    </span><span class="hl-11">// as it will take some time for the transaction to be processed.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionHash</span><span class="hl-0"> = </span><span class="hl-5">getAccountTransactionHash</span><span class="hl-0">(</span><span class="hl-2">accountTransaction</span><span class="hl-0">, </span><span class="hl-2">signatures</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionStatus</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getTransactionStatus</span><span class="hl-0">(</span><span class="hl-2">transactionHash</span><span class="hl-0">);</span>
</code></pre>

<a href="#create-a-new-account" id="create-a-new-account" style="color: inherit; text-decoration: none;">
  <h3>Create a new account</h3>
</a>
<p>The following example demonstrates how to create a new account
on an existing identity. The <code>credentialIndex</code> should be the next
unused credential index for that identity, and keeping track of that
index is done off-chain. Note that index <code>0</code> is used by the initial
account that was created together with the identity. See <a href="#construct-identityinput-for-creating-credentials">Construct
IdentityInput</a> for how
to construct an IdentityInput.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">lastFinalizedBlockHash</span><span class="hl-0"> = (</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getConsensusStatus</span><span class="hl-0">()).</span><span class="hl-2">lastFinalizedBlock</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">cryptographicParameters</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getCryptographicParameters</span><span class="hl-0">(</span><span class="hl-2">lastFinalizedBlockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (!</span><span class="hl-2">cryptographicParameters</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-1">throw</span><span class="hl-0"> </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-3">&#39;Cryptographic parameters were not found on a block that has been finalized.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    }</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The parts of the identity required to create a new account, parsed from </span><br/><span class="hl-0">    </span><span class="hl-11">// e.g. a wallet export.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">identityInput</span><span class="hl-0">: </span><span class="hl-10">IdentityInput</span><span class="hl-0"> = ...</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Require just one key on the credential to sign. This can be any number </span><br/><span class="hl-0">    </span><span class="hl-11">// up to the number of public keys added to the credential.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">threshold</span><span class="hl-0">: </span><span class="hl-10">number</span><span class="hl-0"> = </span><span class="hl-6">1</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The index of the credential that will be created. This index is per identity</span><br/><span class="hl-0">    </span><span class="hl-11">// and has to be in sequence, and not already used. Note that index 0 is used</span><br/><span class="hl-0">    </span><span class="hl-11">// by the initial credential that was created with the identity.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">credentialIndex</span><span class="hl-0">: </span><span class="hl-10">number</span><span class="hl-0"> = </span><span class="hl-6">1</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// In this example the credential on the account will have two keys. Note that</span><br/><span class="hl-0">    </span><span class="hl-11">// the credential information has to be signed (in order) by corresponding </span><br/><span class="hl-0">    </span><span class="hl-11">// private keys.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">publicKeys</span><span class="hl-0">: </span><span class="hl-10">VerifyKey</span><span class="hl-0">[] = [</span><br/><span class="hl-0">        {</span><br/><span class="hl-0">            </span><span class="hl-2">schemeId:</span><span class="hl-0"> </span><span class="hl-3">&quot;Ed25519&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">verifyKey:</span><span class="hl-0"> </span><span class="hl-3">&quot;c8cd7623c5a9316d8e2fccb51e1deee615bdb5d324fb4a6d33801848fb5e459e&quot;</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">        {</span><br/><span class="hl-0">            </span><span class="hl-2">schemeId:</span><span class="hl-0"> </span><span class="hl-3">&quot;Ed25519&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">verifyKey:</span><span class="hl-0"> </span><span class="hl-3">&quot;b6baf645540d0ea6ae5ff0b87dff324340ae1120a5c430ffee60d5f370b2ab75&quot;</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">    ];</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The attributes to reveal about the account holder on chain. This can be empty</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">revealedAttributes</span><span class="hl-0">: </span><span class="hl-10">AttributeKey</span><span class="hl-0">[] = [</span><span class="hl-3">&#39;firstName&#39;</span><span class="hl-0">, </span><span class="hl-3">&#39;nationality&#39;</span><span class="hl-0">];</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">expiry</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">TransactionExpiry</span><span class="hl-0">(</span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">Date</span><span class="hl-0">(</span><span class="hl-2">Date</span><span class="hl-0">.</span><span class="hl-5">now</span><span class="hl-0">() + </span><span class="hl-6">3600000</span><span class="hl-0">));</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">credentialDeploymentTransaction</span><span class="hl-0">: </span><span class="hl-10">CredentialDeploymentTransaction</span><span class="hl-0"> =</span><br/><span class="hl-0">        </span><span class="hl-5">createCredentialDeploymentTransaction</span><span class="hl-0">(</span><br/><span class="hl-0">            </span><span class="hl-2">identityInput</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">cryptographicParameters</span><span class="hl-0">.</span><span class="hl-2">value</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">threshold</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">publicKeys</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">credentialIndex</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">revealedAttributes</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">expiry</span><br/><span class="hl-0">        );</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">hashToSign</span><span class="hl-0">: </span><span class="hl-10">Buffer</span><span class="hl-0"> = </span><span class="hl-5">getCredentialDeploymentSignDigest</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-2">credentialDeploymentTransaction</span><br/><span class="hl-0">    );</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The next step is to sign the credential information with each private key that matches</span><br/><span class="hl-0">    </span><span class="hl-11">// one of the public keys in the credential information.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signingKey1</span><span class="hl-0"> = </span><span class="hl-3">&quot;1053de23867e0f92a48814aabff834e2ca0b518497abaef71cad4e1be506334a&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signingKey2</span><span class="hl-0"> = </span><span class="hl-3">&quot;fcd0e499f5dc7a989a37f8c89536e9af956170d7f502411855052ff75cfc3646&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signature1</span><span class="hl-0"> = </span><span class="hl-2">Buffer</span><span class="hl-0">.</span><span class="hl-5">from</span><span class="hl-0">(</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">ed</span><span class="hl-0">.</span><span class="hl-5">sign</span><span class="hl-0">(</span><span class="hl-2">hashToSign</span><span class="hl-0">, </span><span class="hl-2">signingKey1</span><span class="hl-0">)).</span><span class="hl-5">toString</span><span class="hl-0">(</span><span class="hl-3">&#39;hex&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signature2</span><span class="hl-0"> = </span><span class="hl-2">Buffer</span><span class="hl-0">.</span><span class="hl-5">from</span><span class="hl-0">(</span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">ed</span><span class="hl-0">.</span><span class="hl-5">sign</span><span class="hl-0">(</span><span class="hl-2">hashToSign</span><span class="hl-0">, </span><span class="hl-2">signingKey2</span><span class="hl-0">)).</span><span class="hl-5">toString</span><span class="hl-0">(</span><span class="hl-3">&#39;hex&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">signatures</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">[] = [</span><span class="hl-2">signature1</span><span class="hl-0">, </span><span class="hl-2">signature2</span><span class="hl-0">];</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// The address that the account created by the transaction will get can </span><br/><span class="hl-0">    </span><span class="hl-11">// be derived ahead of time.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">accountAddress</span><span class="hl-0">: </span><span class="hl-10">AccountAddress</span><span class="hl-0"> = </span><span class="hl-5">getAccountAddress</span><span class="hl-0">(</span><span class="hl-2">credentialDeploymentTransaction</span><span class="hl-0">.</span><span class="hl-2">cdi</span><span class="hl-0">.</span><span class="hl-2">credId</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Send the transaction to the node</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">success</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">sendCredentialDeploymentTransaction</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-2">credentialDeploymentTransaction</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">signatures</span><br/><span class="hl-0">    );</span><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">success</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-11">// The node accepted the transaction. This does not ensure that the transaction</span><br/><span class="hl-0">        </span><span class="hl-11">// will end up in a block, only that the format of the submitted transaction was valid.</span><br/><span class="hl-0">    } </span><span class="hl-1">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-11">// The node rejected the transaction.</span><br/><span class="hl-0">    }</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Check the status of the transaction. Should be checked with an appropriate interval,</span><br/><span class="hl-0">    </span><span class="hl-11">// as it will take some time for the transaction to be processed.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionHash</span><span class="hl-0"> = </span><span class="hl-5">getCredentialDeploymentTransactionHash</span><span class="hl-0">(</span><span class="hl-2">credentialDeploymentTransaction</span><span class="hl-0">, </span><span class="hl-2">signatures</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionStatus</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getTransactionStatus</span><span class="hl-0">(</span><span class="hl-2">transactionHash</span><span class="hl-0">);</span>
</code></pre>

<a href="#construct-identityinput-for-creating-credentials" id="construct-identityinput-for-creating-credentials" style="color: inherit; text-decoration: none;">
  <h3>Construct IdentityInput for creating credentials</h3>
</a>
<p>When creating a new identity the user will choose an identity provider,
create an id-use-data object, which contains the private data to use for
the identity, and obtain an identity object from the identity provider.</p>
<p>To create accounts/credentials on that identity, this SDK expects an
&quot;IdentityInput&quot; object, which contains the identity object, the id-use-data,
and the identity provider&#39;s information.</p>

<a href="#construct-from-user-cli-output" id="construct-from-user-cli-output" style="color: inherit; text-decoration: none;">
  <h4>Construct from user-cli output</h4>
</a>
<p>Below is an example of how to construct the
identityInput, with a plaintext id-use-data.json from the <a href="https://github.com/Concordium/concordium-base/blob/main/rust-bins/docs/user-cli.md#generate-a-request-for-the-identity-object">user-cli
guide</a>,
and an id-object file.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-11">// First we load the files. We assume here that they are available as local files.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">rawIdUseData</span><span class="hl-0"> = </span><span class="hl-2">fs</span><span class="hl-0">.</span><span class="hl-5">readFileSync</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-3">&#39;path/to/id-use-data.json&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-3">&#39;utf8&#39;</span><br/><span class="hl-0">    );</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">rawIdObject</span><span class="hl-0"> = </span><span class="hl-2">fs</span><span class="hl-0">.</span><span class="hl-5">readFileSync</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-3">&#39;path/to/id-object.json&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-3">&#39;utf8&#39;</span><br/><span class="hl-0">    );</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Then we parse them. We assume here that they are both version 0.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">idUseData</span><span class="hl-0"> = </span><span class="hl-9">JSON</span><span class="hl-0">.</span><span class="hl-5">parse</span><span class="hl-0">(</span><span class="hl-2">rawIdUseData</span><span class="hl-0">).</span><span class="hl-2">value</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">identityObject</span><span class="hl-0"> = </span><span class="hl-9">JSON</span><span class="hl-0">.</span><span class="hl-5">parse</span><span class="hl-0">(</span><span class="hl-2">rawIdObject</span><span class="hl-0">).</span><span class="hl-2">value</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Finally we construct the IdentityInput:</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">identityInput</span><span class="hl-0">: </span><span class="hl-10">IdentityInput</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">identityObject</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">identityProvider:</span><span class="hl-0"> {</span><br/><span class="hl-0">            </span><span class="hl-2">ipInfo:</span><span class="hl-0"> </span><span class="hl-2">idUseData</span><span class="hl-0">.</span><span class="hl-2">ipInfo</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">arsInfos:</span><span class="hl-0"> </span><span class="hl-2">idUseData</span><span class="hl-0">.</span><span class="hl-2">ars</span><span class="hl-0">,</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">        </span><span class="hl-2">idCredSecret:</span><span class="hl-0"> </span><span class="hl-2">idUseData</span><span class="hl-0">.</span><span class="hl-2">idUseData</span><span class="hl-0">.</span><span class="hl-2">aci</span><span class="hl-0">.</span><span class="hl-2">credentialHolderInformation</span><span class="hl-0">.</span><span class="hl-2">idCredSecret</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">prfKey:</span><span class="hl-0"> </span><span class="hl-2">idUseData</span><span class="hl-0">.</span><span class="hl-2">idUseData</span><span class="hl-0">.</span><span class="hl-2">aci</span><span class="hl-0">.</span><span class="hl-2">prfKey</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">randomness:</span><span class="hl-0"> </span><span class="hl-2">idUseData</span><span class="hl-0">.</span><span class="hl-2">idUseData</span><span class="hl-0">.</span><span class="hl-2">randomness</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span>
</code></pre>

<a href="#construct-from-mobile-wallet-export" id="construct-from-mobile-wallet-export" style="color: inherit; text-decoration: none;">
  <h4>Construct from mobile wallet export</h4>
</a>
<p>The following is an example of how to construct the identityInput for the
<em>i</em>-th identity from a mobile wallet export:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-11">// We assume the export is available as a local file:</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">rawData</span><span class="hl-0"> = </span><span class="hl-2">fs</span><span class="hl-0">.</span><span class="hl-5">readFileSync</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-3">&#39;path/to/export.concordiumwallet&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-3">&#39;utf8&#39;</span><br/><span class="hl-0">    );</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">mobileWalletExport</span><span class="hl-0">: </span><span class="hl-10">EncryptedData</span><span class="hl-0"> = </span><span class="hl-9">JSON</span><span class="hl-0">.</span><span class="hl-5">parse</span><span class="hl-0">(</span><span class="hl-2">rawData</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">decrypted</span><span class="hl-0">: </span><span class="hl-10">MobileWalletExport</span><span class="hl-0"> = </span><span class="hl-5">decryptMobileWalletExport</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-2">mobileWalletExport</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">password</span><br/><span class="hl-0">    );</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">identity</span><span class="hl-0"> = </span><span class="hl-2">decrypted</span><span class="hl-0">.</span><span class="hl-2">value</span><span class="hl-0">.</span><span class="hl-2">identities</span><span class="hl-0">[</span><span class="hl-2">i</span><span class="hl-0">];</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">identityInput</span><span class="hl-0">: </span><span class="hl-10">IdentityInput</span><span class="hl-0"> = {</span><br/><span class="hl-0">        </span><span class="hl-2">identityObject:</span><span class="hl-0"> </span><span class="hl-2">identity</span><span class="hl-0">.</span><span class="hl-2">identityObject</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">identityProvider:</span><span class="hl-0"> </span><span class="hl-2">identity</span><span class="hl-0">.</span><span class="hl-2">identityProvider</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">idCredSecret:</span><span class="hl-0"> </span><span class="hl-2">identity</span><span class="hl-0">.</span><span class="hl-2">privateIdObjectData</span><span class="hl-0">.</span><span class="hl-2">aci</span><span class="hl-0">.</span><span class="hl-2">credentialHolderInformation</span><span class="hl-0">.</span><span class="hl-2">idCredSecret</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">prfKey:</span><span class="hl-0"> </span><span class="hl-2">identity</span><span class="hl-0">.</span><span class="hl-2">privateIdObjectData</span><span class="hl-0">.</span><span class="hl-2">aci</span><span class="hl-0">.</span><span class="hl-2">prfKey</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">randomness:</span><span class="hl-0"> </span><span class="hl-2">identity</span><span class="hl-0">.</span><span class="hl-2">privateIdObjectData</span><span class="hl-0">.</span><span class="hl-2">randomness</span><span class="hl-0">,</span><br/><span class="hl-0">    };</span>
</code></pre>

<a href="#getaccountinfo" id="getaccountinfo" style="color: inherit; text-decoration: none;">
  <h3>getAccountInfo</h3>
</a>
<p>Retrieves information about an account. The function must be provided
an account address or a credential registration id.  If a credential
registration id is provided, then the node returns the information of
the account, which the corresponding credential is (or was) deployed to.
If there is no account that matches the address or credential id at the
provided block, then undefined will be returned.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">accountAddress</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">AccountAddress</span><span class="hl-0">(</span><span class="hl-3">&quot;3sAHwfehRNEnXk28W7A3XB3GzyBiuQkXLNRmDwDGPUe8JsoAcU&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;6b01f2043d5621192480f4223644ef659dd5cda1e54a78fc64ad642587c73def&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">accountInfo</span><span class="hl-0">: </span><span class="hl-10">AccountInfo</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getAccountInfo</span><span class="hl-0">(</span><span class="hl-2">accountAddress</span><span class="hl-0">, </span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">amount</span><span class="hl-0">: </span><span class="hl-10">bigint</span><span class="hl-0"> = </span><span class="hl-2">accountInfo</span><span class="hl-0">.</span><span class="hl-2">accountAmount</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-11">// Nationality for the account creator, if the information has been revealed.</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">nationality</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0"> = </span><span class="hl-2">accountInfo</span><span class="hl-0">.</span><span class="hl-2">accountCredentials</span><span class="hl-0">[</span><span class="hl-6">0</span><span class="hl-0">].</span><span class="hl-2">value</span><span class="hl-0">.</span><span class="hl-2">contents</span><span class="hl-0">.</span><span class="hl-2">policy</span><span class="hl-0">.</span><span class="hl-2">revealedAttributes</span><span class="hl-0">[</span><span class="hl-3">&quot;nationality&quot;</span><span class="hl-0">];</span>
</code></pre>
<p>To check if the account is a baker or a delegator, one can use the functions
<code>isDelegatorAccount</code> and <code>isBakerAccount</code>.</p>
<pre><code class="language-ts"><span class="hl-0">    ...</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">accountInfo</span><span class="hl-0">: </span><span class="hl-10">AccountInfo</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getAccountInfo</span><span class="hl-0">(</span><span class="hl-2">accountAddress</span><span class="hl-0">, </span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-5">isDelegatorAccount</span><span class="hl-0">(</span><span class="hl-2">accountInfo</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">delegationDetails</span><span class="hl-0"> = </span><span class="hl-2">accountInfo</span><span class="hl-0">.</span><span class="hl-2">accountDelegation</span><span class="hl-0">;</span><br/><span class="hl-0">        ...</span><br/><span class="hl-0">    } </span><span class="hl-1">else</span><span class="hl-0"> </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-5">isBakerAccount</span><span class="hl-0">(</span><span class="hl-2">accountInfo</span><span class="hl-0">) {</span><br/><span class="hl-0">        const </span><span class="hl-2">bakingDetails</span><span class="hl-0"> = </span><span class="hl-2">accountInfo</span><span class="hl-0">.</span><span class="hl-2">accountBaker</span><span class="hl-0">;</span><br/><span class="hl-0">        ...</span><br/><span class="hl-0">    } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-11">// Neither a baker nor a delegator</span><br/><span class="hl-0">    }</span>
</code></pre>
<p>Furthermore there are different versions, based on Protocol version, of a
baker&#39;s accountInfo.  In protocol version 4 the concept of baker pools was
introduced, so to get baker pool information one should confirm the version
with <code>isBakerAccountV0</code> or <code>isBakerAccountV1</code>.</p>
<pre><code class="language-ts"><span class="hl-0">    ...</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">accountInfo</span><span class="hl-0">: </span><span class="hl-10">AccountInfo</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getAccountInfo</span><span class="hl-0">(</span><span class="hl-2">accountAddress</span><span class="hl-0">, </span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-5">isBakerAccountV1</span><span class="hl-0">(</span><span class="hl-2">accountInfo</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">bakerPoolInfo</span><span class="hl-0"> = </span><span class="hl-2">accountInfo</span><span class="hl-0">.</span><span class="hl-2">accountBaker</span><span class="hl-0">.</span><span class="hl-2">bakerPoolInfo</span><span class="hl-0">;</span><br/><span class="hl-0">        ...</span><br/><span class="hl-0">    } </span><span class="hl-1">else</span><span class="hl-0"> </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-5">isBakerAccountV0</span><span class="hl-0">(</span><span class="hl-2">accountInfo</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-11">// accountInfo is from protocol version &lt; 4, so it will not contain bakerPoolInfo</span><br/><span class="hl-0">        ...</span><br/><span class="hl-0">    }</span>
</code></pre>

<a href="#getnextaccountnonce" id="getnextaccountnonce" style="color: inherit; text-decoration: none;">
  <h3>getNextAccountNonce</h3>
</a>
<p>Retrieves the next account nonce, i.e. the nonce that must be set in
the account transaction header for the next transaction submitted by that
account. Along with the nonce there is a boolean that indicates whether all
transactions are finalized. If this is true, then the nonce is reliable,
if not then the next nonce might be off.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">accountAddress</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">AccountAddress</span><span class="hl-0">(</span><span class="hl-3">&quot;3VwCfvVskERFAJ3GeJy2mNFrzfChqUymSJJCvoLAP9rtAwMGYt&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">nextAccountNonce</span><span class="hl-0">: </span><span class="hl-10">NextAccountNonce</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getNextAccountNonce</span><span class="hl-0">(</span><span class="hl-2">accountAddress</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">nonce</span><span class="hl-0">: </span><span class="hl-10">bigint</span><span class="hl-0"> = </span><span class="hl-2">nextAccountNonce</span><span class="hl-0">.</span><span class="hl-2">nonce</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">allFinal</span><span class="hl-0">: </span><span class="hl-10">boolean</span><span class="hl-0"> = </span><span class="hl-2">nextAccountNonce</span><span class="hl-0">.</span><span class="hl-2">allFinal</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">allFinal</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-11">// nonce is reliable</span><br/><span class="hl-0">    }</span>
</code></pre>

<a href="#gettransactionstatus" id="gettransactionstatus" style="color: inherit; text-decoration: none;">
  <h3>getTransactionStatus</h3>
</a>
<p>Retrieves status information about a transaction.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;f1f5f966e36b95d5474e6b85b85c273c81bac347c38621a0d8fefe68b69a430f&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionStatus</span><span class="hl-0">: </span><span class="hl-10">TransactionStatus</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getTransactionStatus</span><span class="hl-0">(</span><span class="hl-2">transactionHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">isFinalized</span><span class="hl-0"> = </span><span class="hl-2">transactionStatus</span><span class="hl-0">.</span><span class="hl-2">status</span><span class="hl-0"> === </span><span class="hl-2">TransactionStatusEnum</span><span class="hl-0">.</span><span class="hl-2">Finalized</span><span class="hl-0">;</span><br/><span class="hl-0">    ...</span>
</code></pre>
<p>Note that there will be no outcomes for a transaction that has only been
received:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">transactionStatus</span><span class="hl-0">.</span><span class="hl-2">status</span><span class="hl-0"> === </span><span class="hl-2">TransactionStatusEnum</span><span class="hl-0">.</span><span class="hl-2">Received</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">outcomes</span><span class="hl-0"> = </span><span class="hl-2">Object</span><span class="hl-0">.</span><span class="hl-5">values</span><span class="hl-0">(</span><span class="hl-2">transactionStatus</span><span class="hl-0">.</span><span class="hl-2">outcomes</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-11">// outcomes.length === 0.</span><br/><span class="hl-0">    }</span>
</code></pre>
<p>If the transaction has been finalized, then there is exactly one outcome:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">transactionStatus</span><span class="hl-0">.</span><span class="hl-2">status</span><span class="hl-0"> === </span><span class="hl-2">TransactionStatusEnum</span><span class="hl-0">.</span><span class="hl-2">Finalized</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">outcomes</span><span class="hl-0"> = </span><span class="hl-2">Object</span><span class="hl-0">.</span><span class="hl-5">values</span><span class="hl-0">(</span><span class="hl-2">transactionStatus</span><span class="hl-0">.</span><span class="hl-2">outcomes</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-11">// outcomes.length === 1.</span><br/><span class="hl-0">    }</span>
</code></pre>
<p>A transaction was successful if it is finalized and it has a successful outcome:</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">transactionStatus</span><span class="hl-0">.</span><span class="hl-2">status</span><span class="hl-0"> === </span><span class="hl-2">TransactionStatusEnum</span><span class="hl-0">.</span><span class="hl-2">Finalized</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">event</span><span class="hl-0"> = </span><span class="hl-2">Object</span><span class="hl-0">.</span><span class="hl-5">values</span><span class="hl-0">(</span><span class="hl-2">response</span><span class="hl-0">.</span><span class="hl-2">outcomes</span><span class="hl-0">)[</span><span class="hl-6">0</span><span class="hl-0">];</span><br/><span class="hl-0">        </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">event</span><span class="hl-0">.</span><span class="hl-2">result</span><span class="hl-0">.</span><span class="hl-2">outcome</span><span class="hl-0"> === </span><span class="hl-3">&quot;success&quot;</span><span class="hl-0">) {</span><br/><span class="hl-0">            </span><span class="hl-11">// transaction was successful.</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">    }</span>
</code></pre>

<a href="#getblocksummary" id="getblocksummary" style="color: inherit; text-decoration: none;">
  <h3>getBlockSummary</h3>
</a>
<p>Retrives a summary for a specific block. The summary contains information
about finalization, the current chain parameters, a list of the governance
keys, information about any queued chain parameter updates and a summary of
any transactions within the block.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8761d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockSummary</span><span class="hl-0">: </span><span class="hl-10">BlockSummary</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getBlockSummary</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">numberOfFinalizers</span><span class="hl-0"> = </span><span class="hl-2">blockSummary</span><span class="hl-0">.</span><span class="hl-2">finalizationData</span><span class="hl-0">.</span><span class="hl-2">finalizers</span><span class="hl-0">.</span><span class="hl-2">length</span><span class="hl-0">;</span><br/><span class="hl-0">    ...</span>
</code></pre>
<p>Blocks before protocol version 4 have a different type than those from higher
protocol versions.  To determine the version, use <code>isBlockSummaryV1</code> and
<code>isBlockSummaryV0</code>:</p>
<pre><code class="language-ts"><span class="hl-0">    ...</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockSummary</span><span class="hl-0">: </span><span class="hl-10">BlockSummary</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getBlockSummary</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-5">isBlockSummaryV0</span><span class="hl-0">(</span><span class="hl-2">blockSummary</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-11">// This block is from protocol version &lt;= 3, and so the summary has version 0 structure</span><br/><span class="hl-0">        ...</span><br/><span class="hl-0">    } </span><span class="hl-1">else</span><span class="hl-0"> </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-5">isBlockSummaryV1</span><span class="hl-0">(</span><span class="hl-2">blockSummary</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-11">// This block is from protocol version &gt;= 4, and so the summary has version 1 structure</span><br/><span class="hl-0">        ...</span><br/><span class="hl-0">    } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-11">// Must be a future version of a blockSummary (or the given object is not a blockSummary)</span><br/><span class="hl-0">    }</span>
</code></pre>

<a href="#getblockinfo" id="getblockinfo" style="color: inherit; text-decoration: none;">
  <h3>getBlockInfo</h3>
</a>
<p>Retrieves information about a specific block.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8761d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockInfo</span><span class="hl-0">: </span><span class="hl-10">BlockInfo</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getBlockInfo</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionsCount</span><span class="hl-0"> = </span><span class="hl-2">blockInfo</span><span class="hl-0">.</span><span class="hl-2">transactionCount</span><span class="hl-0">;</span><br/><span class="hl-0">    ...</span>
</code></pre>

<a href="#getblocksatheight" id="getblocksatheight" style="color: inherit; text-decoration: none;">
  <h3>getBlocksAtHeight</h3>
</a>
<p>Retrieves the hashes of blocks at a specific height.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHeight</span><span class="hl-0">: </span><span class="hl-10">bigint</span><span class="hl-0"> = </span><span class="hl-6">5310</span><span class="hl-4">n</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blocksAtHeight</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">[] = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getBlocksAtHeight</span><span class="hl-0">(</span><span class="hl-2">blockHeight</span><span class="hl-0">);</span>
</code></pre>

<a href="#getconsensusstatus" id="getconsensusstatus" style="color: inherit; text-decoration: none;">
  <h3>getConsensusStatus</h3>
</a>
<p>Retrieves the current consensus status from the node.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">consensusStatus</span><span class="hl-0">: </span><span class="hl-10">ConsensusStatus</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getConsensusStatus</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">bestBlock</span><span class="hl-0"> = </span><span class="hl-2">consensusStatus</span><span class="hl-0">.</span><span class="hl-2">bestBlock</span><span class="hl-0">;</span><br/><span class="hl-0">    ...</span>
</code></pre>

<a href="#getcryptographicparameters" id="getcryptographicparameters" style="color: inherit; text-decoration: none;">
  <h3>getCryptographicParameters</h3>
</a>
<p>Retrieves the global cryptographic parameters for the blockchain at a specific block.
These are a required input for e.g. creating credentials.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8761d08554756f42bf268a42749&quot;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">cryptographicParameters</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getCryptographicParameters</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    ...</span>
</code></pre>

<a href="#getidentityproviders" id="getidentityproviders" style="color: inherit; text-decoration: none;">
  <h3>getIdentityProviders</h3>
</a>
<p>Retrieves the list of identity providers at a specific block.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8961d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">identityProviders</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getIdentityProviders</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    ...</span>
</code></pre>

<a href="#getanonymityrevokers" id="getanonymityrevokers" style="color: inherit; text-decoration: none;">
  <h3>getAnonymityRevokers</h3>
</a>
<p>Retrieves the list of anonymity revokers at a specific block.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8961d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">identityProviders</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getAnonymityRevokers</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    ...</span>
</code></pre>

<a href="#getpeerlist" id="getpeerlist" style="color: inherit; text-decoration: none;">
  <h3>getPeerList</h3>
</a>
<p>Retrieves the list of peers that the node is connected to, including some
connection information about them. A boolean parameter determines if this
should include bootstrapper nodes or not.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">peerListResponse</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getPeerList</span><span class="hl-0">(</span><span class="hl-4">false</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">peersList</span><span class="hl-0"> = </span><span class="hl-2">peerListResponse</span><span class="hl-0">.</span><span class="hl-5">getPeersList</span><span class="hl-0">();</span><br/><span class="hl-0">    ...</span>
</code></pre>

<a href="#getbakerlist" id="getbakerlist" style="color: inherit; text-decoration: none;">
  <h3>getBakerList</h3>
</a>
<p>Retrieves the list of ID&#39;s for registered bakers on the network at a specific block.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8961d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">bakerIds</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getBakerList</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    ...</span>
</code></pre>

<a href="#getpoolstatus" id="getpoolstatus" style="color: inherit; text-decoration: none;">
  <h3>getPoolStatus</h3>
</a>
<p>Retrieves the status of a pool (either a specific baker or passive delegation)
at a specific block.  If a baker ID is specified, the status of that baker
is returned. To get the status of passive delegation, baker ID should be
left undefined.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8961d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">bakerId</span><span class="hl-0"> = </span><span class="hl-5">BigInt</span><span class="hl-0">(</span><span class="hl-6">1</span><span class="hl-0">);</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">bakerStatus</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getPoolStatus</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">, </span><span class="hl-2">bakerId</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">passiveDelegationStatus</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getPoolStatus</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">); </span><br/><span class="hl-0">    ...</span>
</code></pre>

<a href="#getrewardstatus" id="getrewardstatus" style="color: inherit; text-decoration: none;">
  <h3>getRewardStatus</h3>
</a>
<p>Retrieves the current amount of funds in the system at a specific block,
and the state of the special accounts.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8961d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">rewardStatus</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getRewardStatus</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span>
</code></pre>
<p>Protocol version 4 expanded the amount of information in the response,
so one should check the type to access that.  This information includes
information about the payday and total amount of funds staked.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-5">isRewardStatusV1</span><span class="hl-0">(</span><span class="hl-2">rewardStatus</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">nextPaydayTime</span><span class="hl-0"> = </span><span class="hl-2">rewardStatus</span><span class="hl-0">.</span><span class="hl-2">nextPaydayTime</span><span class="hl-0">; </span><br/><span class="hl-0">        ...</span><br/><span class="hl-0">    }</span>
</code></pre>

<a href="#check-block-for-transfers-with-memo" id="check-block-for-transfers-with-memo" style="color: inherit; text-decoration: none;">
  <h3>Check block for transfers with memo</h3>
</a>
<p>The following example demonstrates how to check and parse a block for
transfers with a memo.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;b49bb1c06c697b7d6539c987082c5a0dc6d86d91208874517ab17da752472edf&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockSummary</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getBlockSummary</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionSummaries</span><span class="hl-0"> = </span><span class="hl-2">blockSummary</span><span class="hl-0">.</span><span class="hl-2">transactionSummaries</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-1">for</span><span class="hl-0"> (</span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">transactionSummary</span><span class="hl-0"> </span><span class="hl-4">of</span><span class="hl-0"> </span><span class="hl-2">transactionSummaries</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">transactionSummary</span><span class="hl-0">.</span><span class="hl-2">result</span><span class="hl-0">.</span><span class="hl-2">outcome</span><span class="hl-0"> === </span><span class="hl-3">&#39;success&#39;</span><span class="hl-0">) {</span><br/><span class="hl-0">            </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-5">instanceOfTransferWithMemoTransactionSummary</span><span class="hl-0">(</span><span class="hl-2">transactionSummary</span><span class="hl-0">)) {</span><br/><span class="hl-0">                </span><span class="hl-4">const</span><span class="hl-0"> [</span><span class="hl-9">transferredEvent</span><span class="hl-0">, </span><span class="hl-9">memoEvent</span><span class="hl-0">] = </span><span class="hl-2">transactionSummary</span><span class="hl-0">.</span><span class="hl-2">result</span><span class="hl-0">.</span><span class="hl-2">events</span><span class="hl-0">;</span><br/><br/><span class="hl-0">                </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">toAddress</span><span class="hl-0"> = </span><span class="hl-2">transferredEvent</span><span class="hl-0">.</span><span class="hl-2">to</span><span class="hl-0">.</span><span class="hl-2">address</span><span class="hl-0">;</span><br/><span class="hl-0">                </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">amount</span><span class="hl-0"> = </span><span class="hl-2">transferredEvent</span><span class="hl-0">.</span><span class="hl-2">amount</span><span class="hl-0">;</span><br/><span class="hl-0">                </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">memo</span><span class="hl-0"> = </span><span class="hl-2">memoEvent</span><span class="hl-0">.</span><span class="hl-2">memo</span><span class="hl-0">;</span><br/><br/><span class="hl-0">                </span><span class="hl-11">// Apply business logic to toAddress, amount and memo...</span><br/><span class="hl-0">            }</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">    }</span>
</code></pre>

<a href="#getinstances" id="getinstances" style="color: inherit; text-decoration: none;">
  <h3>getInstances</h3>
</a>
<p>Used to get the full list of contract instances on the chain at a specific
block.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8961d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">instances</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getInstances</span><span class="hl-0">(</span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    ...</span>
</code></pre>

<a href="#getinstanceinfo" id="getinstanceinfo" style="color: inherit; text-decoration: none;">
  <h3>getInstanceInfo</h3>
</a>
<p>Used to get information about a specific contract instance, at a specific
block.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8961d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">contractAddress</span><span class="hl-0"> = { </span><span class="hl-2">index:</span><span class="hl-0"> </span><span class="hl-6">1</span><span class="hl-4">n</span><span class="hl-0">, </span><span class="hl-2">subindex:</span><span class="hl-0"> </span><span class="hl-6">0</span><span class="hl-4">n</span><span class="hl-0"> };</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">instanceInfo</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getInstanceInfo</span><span class="hl-0">(</span><span class="hl-2">contractAddress</span><span class="hl-0">, </span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">name</span><span class="hl-0"> = </span><span class="hl-2">instanceInfo</span><span class="hl-0">.</span><span class="hl-2">name</span><span class="hl-0">; </span><br/><span class="hl-0">    ...</span>
</code></pre>
<p>Note that only version 0 contracts returns the model. (use
<code>isInstanceInfoV0</code>/<code>isInstanceInfoV1</code> to check the version)</p>

<a href="#invokecontract" id="invokecontract" style="color: inherit; text-decoration: none;">
  <h3>invokeContract</h3>
</a>
<p>Used to simulate a contract update, and to trigger view functions.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8961d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">contractAddress</span><span class="hl-0"> = { </span><span class="hl-2">index:</span><span class="hl-0"> </span><span class="hl-6">1</span><span class="hl-4">n</span><span class="hl-0">, </span><span class="hl-2">subindex:</span><span class="hl-0"> </span><span class="hl-6">0</span><span class="hl-4">n</span><span class="hl-0"> };</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">invoker</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-5">AccountAddress</span><span class="hl-0">(</span><span class="hl-3">&#39;3tXiu8d4CWeuC12irAB7YVb1hzp3YxsmmmNzzkdujCPqQ9EjDm&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">result</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">invokeContract</span><span class="hl-0">(</span><br/><span class="hl-0">        {</span><br/><span class="hl-0">            </span><span class="hl-2">invoker:</span><span class="hl-0"> </span><span class="hl-2">invoker</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">contract:</span><span class="hl-0"> </span><span class="hl-2">contractAddress</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">method:</span><span class="hl-0"> </span><span class="hl-3">&#39;PiggyBank.smash&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">amount:</span><span class="hl-0"> </span><span class="hl-4">undefined</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">parameter:</span><span class="hl-0"> </span><span class="hl-4">undefined</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-2">energy:</span><span class="hl-0"> </span><span class="hl-6">30000</span><span class="hl-4">n</span><span class="hl-0">,</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">        </span><span class="hl-2">blockHash</span><br/><span class="hl-0">    );</span><br/><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (!</span><span class="hl-2">result</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-11">// The node could not attempt the invocation, most likely the contract doesn&#39;t exist.</span><br/><span class="hl-0">    }</span><br/><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">result</span><span class="hl-0">.</span><span class="hl-2">tag</span><span class="hl-0"> === </span><span class="hl-3">&#39;failure&#39;</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-11">// Invoke was unsuccesful</span><br/><span class="hl-0">        </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">rejectReason</span><span class="hl-0"> = </span><span class="hl-2">result</span><span class="hl-0">.</span><span class="hl-2">reason</span><span class="hl-0">; </span><span class="hl-11">// Describes why the update failed;</span><br/><span class="hl-0">        ...</span><br/><span class="hl-0">    } </span><span class="hl-1">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">events</span><span class="hl-0"> = </span><span class="hl-2">result</span><span class="hl-0">.</span><span class="hl-2">events</span><span class="hl-0">; </span><span class="hl-11">// a list of events that would be generated by the update</span><br/><span class="hl-0">        </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">returnValue</span><span class="hl-0"> = </span><span class="hl-2">result</span><span class="hl-0">.</span><span class="hl-2">returnValue</span><span class="hl-0">; </span><span class="hl-11">// If the invoked method has return value</span><br/><span class="hl-0">        ...</span><br/><span class="hl-0">    }</span>
</code></pre>
<p>Note that some of the parts of the context are optional:</p>
<ul>
<li>amount:
  defaults to 0</li>
<li>energy:
  defaults to 10 million</li>
<li>parameter:
  defaults to no parameters</li>
<li>invoker:
  uses the zero account address, which can be used instead of finding a
  random address.</li>
</ul>

<a href="#getmodulesource" id="getmodulesource" style="color: inherit; text-decoration: none;">
  <h3>getModuleSource</h3>
</a>
<p>This commands gets the source of a module on the chain.</p>
<p>Note that this returns the raw bytes of the source, as a buffer.</p>
<pre><code class="language-ts"><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">blockHash</span><span class="hl-0"> = </span><span class="hl-3">&quot;7f7409679e53875567e2ae812c9fcefe90ced8961d08554756f42bf268a42749&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">moduleReference</span><span class="hl-0"> = </span><span class="hl-3">&quot;c0e51cd55ccbff4fa8da9bb76c9917e83ae8286d86b47647104bf715b4821c1a&quot;</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-9">source</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">client</span><span class="hl-0">.</span><span class="hl-5">getModuleSource</span><span class="hl-0">(</span><span class="hl-2">moduleReference</span><span class="hl-0">, </span><span class="hl-2">blockHash</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-1">if</span><span class="hl-0"> (!</span><span class="hl-2">source</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-11">// the blockHash is unknown or the module doesn&#39;t exist at the given blockHash</span><br/><span class="hl-0">    }</span>
</code></pre>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current"><a href="../../modules.html">Concordium JS-<wbr/>SDK</a>
<ul>
<li class="current pages-entry pages-entry-menu pages-entry-depth-1"><a>Concordium JS-<wbr/>SDK</a>
<ul>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="../cis2-contracts.html">CIS2-<wbr/>Contracts</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="../identity-proofs.html">Identity <wbr/>Proofs</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="../runnable-examples.html">Runnable <wbr/>Examples</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="../transactions.html">Transactions</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-2"><a href="../utility-functions.html">Utility <wbr/>Functions</a></li>
<li class="current pages-entry pages-entry-menu pages-entry-depth-2"><a>Miscellaneous <wbr/>Pages</a>
<ul>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="account-creation.html">Account <wbr/>Creation</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="bundler-optimizations.html">Optimizing bundled applications</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="grpc-migration.html">GRPCv1 to GRPCv2 <wbr/>Migration <wbr/>Guide</a></li>
<li class="current selected pages-entry pages-entry-page pages-entry-depth-3"><a href="grpc-v1.html">Old GRPC-<wbr/>Client</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="upgrade-guide.html">Upgrade <wbr/>Guide</a></li>
<li class="pages-entry pages-entry-page pages-entry-depth-3"><a href="react-native.html">React <wbr/>Native</a></li></ul></li></ul></li>
<li class="tsd-kind-module"><a href="../../modules/cis0.html">cis0</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/cis0.CIS0.html">CIS0</a></li></ul></li>
<li class="tsd-kind-module"><a href="../../modules/cis2.html">cis2</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/cis2.CIS2.html">CIS2</a></li></ul></li>
<li class="tsd-kind-module"><a href="../../modules/cis3.html">cis3</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/cis3.CIS3.html">CIS3</a></li></ul></li>
<li class="tsd-kind-module"><a href="../../modules/cis4.html">cis4</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/cis4.CIS4.html">CIS4</a></li></ul></li>
<li class="tsd-kind-module"><a href="../../modules/grpc.html">grpc</a></li>
<li class="tsd-kind-module"><a href="../../modules/id.html">id</a></li>
<li class="tsd-kind-module"><a href="../../modules/nodejs.html">nodejs</a></li>
<li class="tsd-kind-module"><a href="../../modules/plt.html">plt</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/plt.Token.html">Token</a></li></ul></li>
<li class="tsd-kind-module"><a href="../../modules/plt_Cbor.html">plt/<wbr/>Cbor</a></li>
<li class="tsd-kind-module"><a href="../../modules/plt_CborAccountAddress.html">plt/<wbr/>Cbor<wbr/>Account<wbr/>Address</a></li>
<li class="tsd-kind-module"><a href="../../modules/plt_CborContractAddress.html">plt/<wbr/>Cbor<wbr/>Contract<wbr/>Address</a></li>
<li class="tsd-kind-module"><a href="../../modules/plt_CborMemo.html">plt/<wbr/>Cbor<wbr/>Memo</a></li>
<li class="tsd-kind-module"><a href="../../modules/plt_TokenAmount.html">plt/<wbr/>Token<wbr/>Amount</a></li>
<li class="tsd-kind-module"><a href="../../modules/plt_TokenHolder.html">plt/<wbr/>Token<wbr/>Holder</a></li>
<li class="tsd-kind-module"><a href="../../modules/plt_TokenId.html">plt/<wbr/>Token<wbr/>Id</a></li>
<li class="tsd-kind-module"><a href="../../modules/plt_TokenMetadataUrl.html">plt/<wbr/>Token<wbr/>Metadata<wbr/>Url</a></li>
<li class="tsd-kind-module"><a href="../../modules/plt_TokenModuleReference.html">plt/<wbr/>Token<wbr/>Module<wbr/>Reference</a></li>
<li class="tsd-kind-module"><a href="../../modules/schema.html">schema</a></li>
<li class="tsd-kind-module"><a href="../../modules/transactions.html">transactions</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/transactions.AccountTransactionV0.html">Account<wbr/>Transaction<wbr/>V0</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/transactions.Payload.html">Payload</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/transactions.Transaction.html">Transaction</a></li></ul></li>
<li class="tsd-kind-module"><a href="../../modules/types.html">types</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/types.ContractName.html">Contract<wbr/>Name</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/types.CredentialRegistrationId.html">Credential<wbr/>Registration<wbr/>Id</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/types.EntrypointName.html">Entrypoint<wbr/>Name</a></li>
<li class="tsd-kind-namespace tsd-parent-kind-module"><a href="../../modules/types.ModuleClient.html">Module<wbr/>Client</a></li></ul></li>
<li class="tsd-kind-module"><a href="../../modules/types_AccountAddress.html">types/<wbr/>Account<wbr/>Address</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_BlockHash.html">types/<wbr/>Block<wbr/>Hash</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_CcdAmount.html">types/<wbr/>Ccd<wbr/>Amount</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_ContractAddress.html">types/<wbr/>Contract<wbr/>Address</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_ContractEvent.html">types/<wbr/>Contract<wbr/>Event</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_Duration.html">types/<wbr/>Duration</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_Energy.html">types/<wbr/>Energy</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_InitName.html">types/<wbr/>Init<wbr/>Name</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_ModuleReference.html">types/<wbr/>Module<wbr/>Reference</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_Parameter.html">types/<wbr/>Parameter</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_ReceiveName.html">types/<wbr/>Receive<wbr/>Name</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_ReturnValue.html">types/<wbr/>Return<wbr/>Value</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_SequenceNumber.html">types/<wbr/>Sequence<wbr/>Number</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_Timestamp.html">types/<wbr/>Timestamp</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_TransactionExpiry.html">types/<wbr/>Transaction<wbr/>Expiry</a></li>
<li class="tsd-kind-module"><a href="../../modules/types_TransactionHash.html">types/<wbr/>Transaction<wbr/>Hash</a></li>
<li class="tsd-kind-module"><a href="../../modules/util.html">util</a></li>
<li class="tsd-kind-module"><a href="../../modules/wasm.html">wasm</a></li>
<li class="tsd-kind-module"><a href="../../modules/web3_id.html">web3-<wbr/>id</a></li></ul></li></ul></div></details></nav>
<nav class="tsd-navigation secondary menu-sticky"></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="../../assets/main.js"></script></body></html>